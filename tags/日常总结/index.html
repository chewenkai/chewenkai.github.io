<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><title>Tag: æ—¥å¸¸æ€»ç»“ - Calvin</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="Kaka"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Kaka"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="description"><meta property="og:type" content="blog"><meta property="og:title" content="Calvin"><meta property="og:url" content="https://chewenkai.github.io/"><meta property="og:site_name" content="Calvin"><meta property="og:description" content="description"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://chewenkai.github.io/img/og_image.png"><meta property="article:author" content="calvinche"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://chewenkai.github.io"},"headline":"Calvin","image":["https://chewenkai.github.io/img/og_image.png"],"author":{"@type":"Person","name":"calvinche"},"publisher":{"@type":"Organization","name":"Calvin","logo":{"@type":"ImageObject","url":"https://chewenkai.github.io/img/logo.svg"}},"description":"description"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-72437521-5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-72437521-5');</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 6.0.0">
<style>.not-gallery-item { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .not-gallery-item > span { position: relative; z-index: 10; }  .not-gallery-item img, .not-gallery-item .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .not-gallery-item img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .not-gallery-item-fallback { color: inherit; } .not-gallery-item-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Calvin" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Calvin" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Discuss on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus/discussions"><i class="fas fa-comments"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">æ—¥å¸¸æ€»ç»“</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-08-06T09:48:49.000Z" title="8/6/2019, 5:48:49 PM">2019-08-06</time></span><span class="level-item">13 minutes read (About 1976 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/uncategorized/git%E4%BF%9D%E5%91%BD%E5%A4%A7%E5%85%A8/">Gitä¿å‘½å¤§å…¨</a></h1><div class="content"><h3 id="ğŸ’¥æˆ‘ä¸å°å¿ƒåˆ é™¤äº†åˆ†æ”¯-æˆ–è€…-åˆ é™¤äº†Stash-æˆ–è€…-ä¸¢å¤±äº†æäº¤ï¼ˆreset-â€”hardï¼‰-æ€ä¹ˆåŠï¼"><a href="#ğŸ’¥æˆ‘ä¸å°å¿ƒåˆ é™¤äº†åˆ†æ”¯-æˆ–è€…-åˆ é™¤äº†Stash-æˆ–è€…-ä¸¢å¤±äº†æäº¤ï¼ˆreset-â€”hardï¼‰-æ€ä¹ˆåŠï¼" class="headerlink" title="ğŸ’¥æˆ‘ä¸å°å¿ƒåˆ é™¤äº†åˆ†æ”¯  æˆ–è€…  åˆ é™¤äº†Stash æˆ–è€…  ä¸¢å¤±äº†æäº¤ï¼ˆreset â€”hardï¼‰ æ€ä¹ˆåŠï¼"></a>ğŸ’¥æˆ‘ä¸å°å¿ƒåˆ é™¤äº†åˆ†æ”¯  æˆ–è€…  åˆ é™¤äº†Stash æˆ–è€…  ä¸¢å¤±äº†æäº¤ï¼ˆreset â€”hardï¼‰ æ€ä¹ˆåŠï¼</h3><p>æ“ä½œå‰ï¼Œå»ºè®®å¤‡ä»½ä¸€ä¸‹å½“å‰çš„åˆ†æ”¯ï¼Œæˆ–è€…åˆ‡æ¢åˆ°æ–°çš„åˆ†æ”¯è¿›è¡Œæ“ä½œã€‚</p>
<h5 id="1-ç¡®å®šæ­£ç¡®çš„SHA-1å€¼"><a href="#1-ç¡®å®šæ­£ç¡®çš„SHA-1å€¼" class="headerlink" title="1/ ç¡®å®šæ­£ç¡®çš„SHA-1å€¼"></a>1/ ç¡®å®šæ­£ç¡®çš„SHA-1å€¼</h5><p>é¦–å…ˆï¼Œä½ éœ€è¦æ‰¾åˆ°åˆ†æ”¯æˆ–è€…æäº¤çš„SHA-1å€¼ï¼Œå¦‚æœä½ å·²ç»çŸ¥é“ä¸¢å¤±åˆ†æ”¯çš„SHA-1å€¼ï¼Œå¯è·³è¿‡è¿™ä¸ªæ­¥éª¤ã€‚</p>
<p>é€šè¿‡<code>git reflog</code>å‘½ä»¤æŸ¥æ‰¾å¯¹gitä½œå‡ºè¿‡çš„ä¿®æ”¹ï¼Œå¯ä»¥æŸ¥è¯¢åˆ°HEADçš„å˜æ›´è®°å½•ï¼Œå¦‚commit, rebase, checkout, resetç­‰ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment"># git reflog</span></span><br><span class="line">a55a2725e HEAD@{846}: checkout: moving from calvinche/3650/voiceopt to calvinche/3650/bugfix</span><br><span class="line">5271cecfc HEAD@{847}: commit: --story=855394891 ã€è¯­éŸ³æ§åˆ¶ã€‘è¯­éŸ³æ§åˆ¶åŠŸèƒ½ä¼˜åŒ–</span><br><span class="line">5413bd7ce HEAD@{848}: checkout: moving from calvinche/3650/bugfix to calvinche/3650/voiceopt</span><br><span class="line">a55a2725e HEAD@{849}: commit: --bug=74100899 ã€ç•…å¬é¡µå¡ã€‘æ´»åŠ¨å¼¹çª—é®æŒ¡æ’­æ”¾åˆ—è¡¨çš„é—®é¢˜</span><br><span class="line">5413bd7ce HEAD@{850}: checkout: moving from calvinche/3650/voiceopt to calvinche/3650/bugfix</span><br><span class="line">5413bd7ce HEAD@{851}: reset: moving to 5413bd7ce1a1ddfbd12406175a83c863f9d68da6</span><br><span class="line">ff1200963 HEAD@{852}: commit: --story=855394891 ã€è¯­éŸ³æ§åˆ¶ã€‘è¯­éŸ³æ§åˆ¶åŠŸèƒ½ä¼˜åŒ–</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬ä¸€åˆ—å°±æ˜¯æ‰€åœ¨æäº¤çš„SHA-1å€¼</p>
<p>å¦‚æœé€šè¿‡reflogæ— æ³•æ‰¾åˆ°ä¸¢å¤±çš„åˆ†æ”¯æˆ–è€…æäº¤ï¼Œé‚£ä½ è¿˜å¯ä»¥é€šè¿‡<code>git fsck</code>å‘½ä»¤æŸ¥æ‰¾gitæ•°æ®åº“ä¸­æ‰€æœ‰ä¸¢å¤±çš„åˆ†æ”¯ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fsck --full --no-reflogs --unreachable --lost-found | grep commit | <span class="built_in">cut</span> -d\  -f3 | xargs -n 1 git <span class="built_in">log</span> -n 1 --pretty=oneline &gt; ~/lost-found.txt</span><br></pre></td></tr></tbody></table></figure>

<p>ç”±äºè¾“å‡ºçš„ç»“æœé€šå¸¸è¾ƒå¤§ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°†å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­è¿›è¡ŒæŸ¥çœ‹ï¼Œå…¶è¾“å‡ºçš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">e005fc257bb96252e9bc84deb255bba28f829e63 --story=854880635 ã€æŠ€æœ¯ä¼˜åŒ–ã€‘å‡çº§gradle: ä¿®å¤æ‰“åŒ…æ— äº§ç‰©</span><br><span class="line">b90bace85ba53c9a229f84a458935aeb6858bc6c --story=854880635 ã€æŠ€æœ¯ä¼˜åŒ–ã€‘å‡çº§gradle: ä¿®æ”¹build_patchå¤±è´¥</span><br><span class="line">9b51c859899d0699a73c699fb349d8ff952cf7ae WIP on master: c5312d039 Merge branch <span class="string">'calvinche/dev/car_adapt'</span> into <span class="string">'master'</span></span><br><span class="line">aa0c44873d24bc07487e4e5b8883189573c55029 --story=64610857 ã€è¯­éŸ³äº¤äº’ã€‘æ’­æ”¾æ§åˆ¶åŠŸèƒ½:UIèµ°æŸ¥</span><br><span class="line">d40e8c2ed3122a30164c82696a72bf4d5fbd8c58 --story=854880635 ã€æŠ€æœ¯ä¼˜åŒ–ã€‘å‡çº§gradle: ä¿®å¤æ‰“åŒ…æ— äº§ç‰©</span><br><span class="line">ed0f98b6ebd7bb9bbb6da21467fdea2931bab598 --story=64610857 ã€è¯­éŸ³äº¤äº’ã€‘æ’­æ”¾æ§åˆ¶åŠŸèƒ½:å®ç°è¯­éŸ³è¯†åˆ«å’Œå‘½ä»¤æ‰§è¡Œ</span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æäº¤çš„åå­—æˆ–è€…é€šè¿‡<code>git log -p &lt;commit&gt;</code>æŸ¥çœ‹æäº¤çš„å†…å®¹æˆ–<code>git cat-file -p &lt;commit&gt;</code>æŸ¥çœ‹æäº¤çš„ä¿¡æ¯æ¥ç¡®å®šæˆ‘ä»¬è¦æ¢å¤çš„æäº¤ï¼Œç¡®å®šäº†è¦æ¢å¤çš„æäº¤åï¼Œå¤åˆ¶å®ƒçš„SHA-1å€¼å¤‡ç”¨ã€‚</p>
<h6 id="2-æ¢å¤"><a href="#2-æ¢å¤" class="headerlink" title="2/ æ¢å¤"></a>2/ æ¢å¤</h6><p>å¦‚æœä½ è¦æ¢å¤çš„æ˜¯åˆ†æ”¯ï¼Œä½¿ç”¨ç±»ä¼¼äºä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;new branch name&gt; &lt;SHA-1&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœä½ è¦æ¢å¤çš„æ˜¯æäº¤ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;SHA-1&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ğŸ’¥æˆ‘çš„æäº¤å†å²é‡å¤è‡ƒè‚¿ï¼Œæ‚ä¹±æ— ç« æ€ä¹ˆåŠï¼"><a href="#ğŸ’¥æˆ‘çš„æäº¤å†å²é‡å¤è‡ƒè‚¿ï¼Œæ‚ä¹±æ— ç« æ€ä¹ˆåŠï¼" class="headerlink" title="ğŸ’¥æˆ‘çš„æäº¤å†å²é‡å¤è‡ƒè‚¿ï¼Œæ‚ä¹±æ— ç« æ€ä¹ˆåŠï¼"></a>ğŸ’¥æˆ‘çš„æäº¤å†å²é‡å¤è‡ƒè‚¿ï¼Œæ‚ä¹±æ— ç« æ€ä¹ˆåŠï¼</h3><p>æœ‰æ—¶å€™ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½è¢«äº§å“æˆ–è®¾è®¡æ‰“æ–­ï¼Œæˆ–è€…å‰æœŸè€ƒè™‘ä¸å¤Ÿä¸¥è°¨å¯¼è‡´åé¢è¡¥å……äº†è¿‡å¤šçš„ä¿®è¡¥æäº¤ï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡Rebaseçš„äº¤äº’æ¨¡å¼ï¼Œå¯¹æäº¤å†å²è¿›è¡Œâ€œç¾åŒ–â€ã€‚</p>
<p>ä¾‹å¦‚ä¸‹é¢ä¸€ä¸ªæäº¤è®°å½•ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--story=854849047(d01f70f39)ã€æŠ€æœ¯ä¼˜åŒ–ã€‘frescoå›¾ç‰‡åº“æ›´æ–° hypertian* 2019-05-23 13:12</span><br><span class="line">--story=64746051 ã€ä¸ªäººä¸­å¿ƒã€‘å¢åŠ å¼€æœºå…´è¶£é€‰æ‹©ä¿®æ”¹: UIèµ°æŸ¥ä¿®æ”¹1 calvinche 2019-05-20 22:25</span><br><span class="line">--story=64746051 ã€ä¸ªäººä¸­å¿ƒã€‘å¢åŠ å¼€æœºå…´è¶£é€‰æ‹©ä¿®æ”¹: äº§å“è¡¥å……é€»è¾‘1 calvinche 2019-05-23 15:59</span><br><span class="line">--story=64746051 ã€ä¸ªäººä¸­å¿ƒã€‘å¢åŠ å¼€æœºå…´è¶£é€‰æ‹©ä¿®æ”¹: UIèµ°æŸ¥ä¿®æ”¹2 calvinche 2019-05-21 14:50</span><br><span class="line">--story=64746051 ã€ä¸ªäººä¸­å¿ƒã€‘å¢åŠ å¼€æœºå…´è¶£é€‰æ‹©ä¿®æ”¹:äº§å“è¡¥å……é€»è¾‘2 calvinche 2019-05-23 18:25</span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥çœ‹å‡ºï¼ŒUIä¿®æ”¹å’Œé€»è¾‘ä¿®æ”¹æäº¤äº†å¤šæ¬¡ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæŠŠä¸¤ä¸ªUIèµ°æŸ¥çš„æäº¤åˆå¹¶ï¼ŒæŠŠä¸¤ä¸ªè¡¥å……é€»è¾‘çš„æäº¤åˆå¹¶ï¼Œæäº¤å†å²çœ‹èµ·æ¥ä¼šæ¸…æ¥šå¹²å‡€å¾ˆå¤šï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨rebaseæ“ä½œæ¥æ•´ç†æäº¤è®°å½•ï¼š</p>
<h5 id="1-è¿›å…¥Rebaseäº¤äº’æ¨¡å¼"><a href="#1-è¿›å…¥Rebaseäº¤äº’æ¨¡å¼" class="headerlink" title="1/ è¿›å…¥Rebaseäº¤äº’æ¨¡å¼"></a>1/ è¿›å…¥Rebaseäº¤äº’æ¨¡å¼</h5><p>æ‰¾åˆ°è¦ä¿®æ”¹æäº¤çš„ä¸Šä¸€æ¡æäº¤çš„SHAå€¼ï¼Œå¦‚ä¸Šé¢ä¾‹å­ï¼Œè¦å¯¹ä¸‹é¢å››ä¸ªæäº¤è¿›è¡Œä¿®æ”¹ï¼Œåˆ™éœ€è¦æ‰¾åˆ°â€frescoå›¾ç‰‡åº“æ›´æ–°â€è¿™ä¸ªæäº¤çš„SHAå€¼ï¼šd01f70f39ï¼Œç„¶åè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i d01f70f3</span><br></pre></td></tr></tbody></table></figure>

<p>å°±è¿›å…¥åˆ°ä¸‹é¢çš„é¡µé¢ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">pick 39741ee1a --story=64746051 ã€ä¸ªäººä¸­å¿ƒã€‘å¢åŠ å¼€æœºå…´è¶£é€‰æ‹©ä¿®æ”¹:  UIèµ°æŸ¥ä¿®æ”¹1</span><br><span class="line">pick 8078fa8f9 --story=64746051 ã€ä¸ªäººä¸­å¿ƒã€‘å¢åŠ å¼€æœºå…´è¶£é€‰æ‹©ä¿®æ”¹: äº§å“è¡¥å……é€»è¾‘1</span><br><span class="line">pick 6f830afa3 --story=64746051 ã€ä¸ªäººä¸­å¿ƒã€‘å¢åŠ å¼€æœºå…´è¶£é€‰æ‹©ä¿®æ”¹: UIèµ°æŸ¥ä¿®æ”¹2</span><br><span class="line">pick 5efe76189 --story=64746051 ã€ä¸ªäººä¸­å¿ƒã€‘å¢åŠ å¼€æœºå…´è¶£é€‰æ‹©ä¿®æ”¹:äº§å“è¡¥å……é€»è¾‘2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rebase d01f70f39..5efe76189 onto d01f70f39 (4 commands)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Commands:</span></span><br><span class="line"><span class="comment"># p, pick &lt;commit&gt; = use commit</span></span><br><span class="line"><span class="comment"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span></span><br><span class="line"><span class="comment"># e, edit &lt;commit&gt; = use commit, but stop for amending</span></span><br><span class="line"><span class="comment"># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span></span><br><span class="line"><span class="comment"># f, fixup &lt;commit&gt; = like "squash", but discard this commit's log message</span></span><br><span class="line"><span class="comment"># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span></span><br><span class="line"><span class="comment"># d, drop &lt;commit&gt; = remove commit</span></span><br><span class="line"><span class="comment"># l, label &lt;label&gt; = label current HEAD with a name</span></span><br><span class="line"><span class="comment"># t, reset &lt;label&gt; = reset HEAD to a label</span></span><br><span class="line"><span class="comment"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span></span><br><span class="line"><span class="comment"># .       create a merge commit using the original merge commit's</span></span><br><span class="line"><span class="comment"># .       message (or the oneline, if no original merge commit was</span></span><br><span class="line"><span class="comment"># .       specified). Use -c &lt;commit&gt; to reword the commit message.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># These lines can be re-ordered; they are executed from top to bottom.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If you remove a line here THAT COMMIT WILL BE LOST.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#       However, if you remove everything, the rebase will be aborted.</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h5 id="2-ä½¿ç”¨åˆé€‚çš„å‘½ä»¤å¯¹æäº¤è®°å½•è¿›è¡Œä¿®æ”¹"><a href="#2-ä½¿ç”¨åˆé€‚çš„å‘½ä»¤å¯¹æäº¤è®°å½•è¿›è¡Œä¿®æ”¹" class="headerlink" title="2/ ä½¿ç”¨åˆé€‚çš„å‘½ä»¤å¯¹æäº¤è®°å½•è¿›è¡Œä¿®æ”¹"></a>2/ ä½¿ç”¨åˆé€‚çš„å‘½ä»¤å¯¹æäº¤è®°å½•è¿›è¡Œä¿®æ”¹</h5><p>æ¯æ¬¡æäº¤æŒ‰ç…§æ—¶é—´å‡åºæ’åˆ—ï¼Œä¹Ÿå°±æ˜¯æœ€ä¸Šé¢çš„æäº¤æ˜¯æœ€æ—©çš„æäº¤ã€‚æ¯ä¸ªæäº¤å‰é¢æ˜¯è¦è¿›è¡Œä¿®æ”¹çš„å‘½ä»¤ï¼Œä¸‹é¢åˆ—å‡ºäº†æ‰€æœ‰å¯ç”¨çš„å‘½ä»¤çš„åå­—åŠå…¶åŠŸèƒ½ï¼Œé»˜è®¤æ˜¯pickï¼Œä¹Ÿå°±æ˜¯ä¿ç•™è¿™æ¡æäº¤ï¼Œä»€ä¹ˆä¹Ÿä¸åšçš„æ„æ€ã€‚è¿™é‡Œè§£é‡Šä¸€ä¸‹å‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤ï¼š</p>
<blockquote>
<p>rewordï¼šé‡å‘½åæäº¤ä¿¡æ¯</p>
</blockquote>
<blockquote>
<p>editï¼šç¼–è¾‘æäº¤çš„å†…å®¹ï¼Œå¯ä»¥ç”¨äºæ·»åŠ æˆ–ç§»å‡ºæäº¤çš„æ–‡ä»¶</p>
</blockquote>
<blockquote>
<p>squashï¼šå°†å½“å‰æäº¤å’Œå‰ä¸€æ¡æäº¤åˆå¹¶ï¼Œä½¿ç”¨åï¼Œä¼šè·³åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œç¼–è¾‘åˆå¹¶åçš„æäº¤ä¿¡æ¯</p>
</blockquote>
<blockquote>
<p>fixupï¼šå°†å½“å‰æäº¤å’Œå‰ä¸€æ¡æäº¤åˆå¹¶ï¼Œä½¿ç”¨åï¼Œä¸¢å¼ƒå½“å‰çš„æäº¤ä¿¡æ¯ï¼Œç›´æ¥ä»¥ä¸Šä¸€æ¡æäº¤ä¿¡æ¯ä¸ºåˆå¹¶åçš„æäº¤ä¿¡æ¯</p>
</blockquote>
<blockquote>
<p>dropï¼šåˆ é™¤å½“å‰çš„æäº¤</p>
</blockquote>
<p>âš ï¸ éœ€è¦<strong>æ³¨æ„</strong>çš„æ˜¯è¿™å¥è¯ï¼š</p>
<blockquote>
<p>These lines can be re-ordered; they are executed from top to bottom.</p>
</blockquote>
<p>æ„æ€æ˜¯è¯´ï¼Œæ”¹å˜ä¸Šé¢ä¸€è¡Œè¡Œçš„æäº¤è®°å½•çš„é¡ºåºæ˜¯å¯ä»¥æ”¹å˜æœ€ç»ˆçš„æäº¤é¡ºåºçš„ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ”¹å˜é¡ºåºå¯èƒ½ä¼šå¸¦æ¥conflictï¼Œå¦‚æœé‡åˆ°å†²çªï¼Œéœ€è¦è§£å†³å†²çªåæ‰èƒ½ç»§ç»­Rebaseã€‚</p>
<p>å¯ä»¥çœ‹ä¸‹è§†é¢‘ä¸­çš„æ¼”ç¤ºæ¶ˆåŒ–ç†è§£</p>
<a href="/uncategorized/git%E4%BF%9D%E5%91%BD%E5%A4%A7%E5%85%A8/rebase.mov" title="rebase interactively">rebase interactively</a>



<h5 id="3-æ¢å¤åˆ°Rebaseå‰"><a href="#3-æ¢å¤åˆ°Rebaseå‰" class="headerlink" title="3/ æ¢å¤åˆ°Rebaseå‰"></a>3/ æ¢å¤åˆ°Rebaseå‰</h5><p>å¦‚æœä½ rebaseç»“æŸåå‘ç°å¹¶ä¸æ˜¯è‡ªå·±æƒ³è¦çš„ç»“æœï¼Œè¿™ä¸ªæ—¶å€™æ€ä¹ˆæ¢å¤åˆ°rebaseä¹‹å‰å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œè¿è¡Œä¸‹ä¸‹é¢è¿™ä¸ªå‘½ä»¤å³å¯:</p>
<p><code>git reset --hard ORIG_HEAD</code></p>
<p>In case <code>ORIG_HEAD</code> is no longer useful, you can also use the <code>branchName@{n}</code> syntax, where <code>n</code> is the nth prior position of the branch pointer. So for example, if you rebase <code>featureA</code> branch onto your <code>master</code> branch, but you donâ€™t like the result of the rebase, then you can simply do <code>git reset --hard featureA@{1}</code> to reset the branch back to exactly where it was before you did the rebase. You can read more about the branch@{n} syntax at <a target="_blank" rel="noopener" href="http://git-scm.com/docs/gitrevisions">the official Git docs for revisions</a>. </p>
<h5 id="âš ï¸âš ï¸âš ï¸-Rebaseçš„æœ€åŸºæœ¬åŸåˆ™"><a href="#âš ï¸âš ï¸âš ï¸-Rebaseçš„æœ€åŸºæœ¬åŸåˆ™" class="headerlink" title="âš ï¸âš ï¸âš ï¸ Rebaseçš„æœ€åŸºæœ¬åŸåˆ™"></a>âš ï¸âš ï¸âš ï¸ Rebaseçš„æœ€åŸºæœ¬åŸåˆ™</h5><p>æ—¢ç„¶Rebaseå‘½ä»¤å¯ä»¥åˆ é™¤å’Œç¼–è¾‘å†å²æäº¤ï¼Œé‚£åŒæ ·ä¹Ÿæœ‰ä¸€ä¸ªé‡è¦çš„åŸåˆ™ï¼š</p>
<blockquote>
<p> <strong>æ°¸è¿œä¸è¦å¯¹å·²ç»æ¨åˆ°ä¸»å¹²åˆ†æ”¯æœåŠ¡å™¨æˆ–è€…å›¢é˜Ÿå…¶ä»–æˆå‘˜çš„æäº¤è¿›è¡ŒRebaseï¼Œæˆ‘ä»¬é€‰æ‹©RebaseèŒƒå›´åº”è¯¥åœ¨è‡ªå·±æœ¬åœ°å·¥ä½œèŒƒå›´å†…ã€‚</strong></p>
</blockquote>
<p> å¦åˆ™ï¼Œäººæ°‘ç¾¤ä¼—ä¼šä»‡æ¨ä½ ï¼Œä½ çš„æœ‹å‹å’Œå®¶äººä¹Ÿä¼šå˜²ç¬‘ä½ ï¼Œå”¾å¼ƒä½ ã€‚</p>
<h4 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h4><p>[1] https://www.internalpointers.com/post/squash-commits-into-one-git</p>
<p>[2] https://ohshitgit.com/</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-03-11T01:32:41.000Z" title="3/11/2019, 9:32:41 AM">2019-03-11</time></span><span class="level-item">3 minutes read (About 466 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/uncategorized/%E5%88%9D%E8%AF%86viewpager2/">åˆè¯†ViewPager2</a></h1><div class="content"><p>ViewPager2æ˜¯Googleäº2019å¹´2æœˆ7å·å‘å¸ƒçš„ViewPagerçš„å‡çº§ç‰ˆæœ¬ï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯1.0.0-alpha01ã€‚ViewPager2ä¸»è¦è§£å†³äº†ä¼ ç»ŸViewPagerä¸­çš„å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ä¸æ”¯æŒä»å³åˆ°å·¦å¸ƒå±€</li>
<li>ä¸æ”¯æŒçºµå‘æ»šåŠ¨</li>
<li>notifyDataSetChanged()æœ‰æ—¶ä¸èµ·ä½œç”¨çš„Bug</li>
</ul>
<h3 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h3><p>æŸ¥çœ‹ViewPager2å†…éƒ¨ä»£ç å¯ä»¥çœ‹å‡ºï¼Œå…¶å®ç°åŸç†æ˜¯åœ¨å…¶å†…éƒ¨å°è£…äº†ä¸€ä¸ªRecyclerViewï¼Œåˆ©ç”¨LinearLayoutManager+PagerSnapHelperå®ç°äº†ViewPagerçš„æ»šåŠ¨æ•ˆæœä»¥åŠå¯¹çºµå‘æ»šåŠ¨çš„æ”¯æŒã€‚</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewPager2</span> <span class="keyword">extends</span> <span class="title class_">ViewGroup</span> {</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(Context context, AttributeSet attrs)</span> {</span><br><span class="line">            mRecyclerView = <span class="keyword">new</span> <span class="title class_">RecyclerView</span>(context) {</span><br><span class="line">               ...</span><br><span class="line">            };</span><br><span class="line"></span><br><span class="line">            mLayoutManager = <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(context);</span><br><span class="line">            mRecyclerView.setLayoutManager(mLayoutManager);</span><br><span class="line">            setOrientation(context, attrs);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">PagerSnapHelper</span>().attachToRecyclerView(mRecyclerView);</span><br><span class="line">            ...</span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ç›®å‰å­˜åœ¨çš„é—®é¢˜ï¼š"><a href="#ç›®å‰å­˜åœ¨çš„é—®é¢˜ï¼š" class="headerlink" title="ç›®å‰å­˜åœ¨çš„é—®é¢˜ï¼š"></a>ç›®å‰å­˜åœ¨çš„é—®é¢˜ï¼š</h3><p>ç”±äºç›´æ¥ä½¿ç”¨çš„RecycleViewå®ç°ï¼Œä¸€äº›ViewPagerçš„ç‰¹æ€§æ²¡æœ‰å¾—åˆ°å®Œå…¨å®ç°ï¼Œå®˜æ–¹æŒ‡å‡ºäº†ä¸‹é¢å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ä¸æ”¯æŒè®¾ç½®offscreen limit</li>
<li>ä¸TabLayoutçš„é›†æˆå­˜åœ¨é—®é¢˜</li>
<li>FragmentStateAdapterè¿˜æœ‰ç¨³å®šæ€§é—®é¢˜</li>
<li>ä¸æ”¯æŒè®¾ç½®pageWitchï¼Œé»˜è®¤100%/100%</li>
<li>ä¸æ”¯æŒclipToPadding</li>
<li>ä¸æ”¯æŒfakeDrag</li>
<li>è®¾ç½®page transformeræ—¶ï¼Œä¸æ”¯æŒè®¾ç½®ç»˜åˆ¶é¡ºåº</li>
</ul>
<h3 id="ä½¿ç”¨æ–¹æ³•ï¼š"><a href="#ä½¿ç”¨æ–¹æ³•ï¼š" class="headerlink" title="ä½¿ç”¨æ–¹æ³•ï¼š"></a>ä½¿ç”¨æ–¹æ³•ï¼š</h3><p>å…¶ä½¿ç”¨æ–¹æ³•ä¸ä¼ ç»ŸViewPagerç±»ä¼¼ï¼š</p>
<p>1.åœ¨æ¨¡å—gradleä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'androidx.viewpager2:viewpager2:1.0.0-alpha01'</span></span><br></pre></td></tr></tbody></table></figure>

<p>2.åœ¨Layoutæ–‡ä»¶ä¸­å¸ƒå±€ï¼Œè¿™é‡Œå¯ä»¥è®¾ç½®æ»šåŠ¨æ–¹å‘:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;androidx.viewpager2.widget.ViewPager2</span><br><span class="line">        android:id=<span class="string">"@+id/viewPager2"</span></span><br><span class="line">        android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">        android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">        android:orientation=<span class="string">"vertical"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>3.åˆ›å»ºAdapterï¼ŒViewPager2ä½¿ç”¨FragmentStateAdapteræ¥å®ç°Fragmentçš„ç®¡ç†ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewPager2Adapter</span> <span class="keyword">extends</span> <span class="title class_">FragmentStateAdapter</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ViewPager2Adapter</span><span class="params">(<span class="meta">@NonNull</span> FragmentManager fragmentManager)</span> {</span><br><span class="line">        <span class="built_in">super</span>(fragmentManager);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Fragment <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> position)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleFragment</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>4.åº”ç”¨Adapter:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewPager2 = findViewById(R.id.viewpager2);</span><br><span class="line"><span class="type">ViewPager2Adapter</span> <span class="variable">adapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewPager2Adapter</span>(getSupportFragmentManager());</span><br><span class="line">viewPager2.setAdapter(adapter);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ViewPager2å…·æœ‰åŸç”Ÿæ”¯æŒå‚ç›´æ–¹å‘æ»‘åŠ¨çš„ç‰¹æ€§ï¼Œä½†æ˜¯ç”±äºç›®å‰FragmentStateAdapterè¿˜æœ‰ç¨³å®šæ€§é—®é¢˜ï¼Œä»¥åŠè®¾ç½®page transformeræ—¶ï¼Œä¸æ”¯æŒè®¾ç½®ç»˜åˆ¶é¡ºåºï¼Œåœ¨å®é™…åº”ç”¨æ—¶è¿˜éœ€è¦å¤šè¿›è¡Œä¿®æ”¹å’Œæµ‹è¯•ã€‚å»ºè®®ç­‰å®˜æ–¹æ¨å‡ºç¨³å®šç‰ˆæœ¬åï¼Œå†è€ƒè™‘æ¥å…¥ã€‚</p>
<p><strong>å‚è€ƒï¼š</strong></p>
<p>[1] <a target="_blank" rel="noopener" href="https://developer.android.com/jetpack/androidx/releases/viewpager2">https://developer.android.com/jetpack/androidx/releases/viewpager2</a></p>
<p>[2] <a target="_blank" rel="noopener" href="https://developer.android.google.cn/reference/androidx/viewpager2/adapter/FragmentStateAdapter">https://developer.android.google.cn/reference/androidx/viewpager2/adapter/FragmentStateAdapter</a></p>
<p>[3] <a target="_blank" rel="noopener" href="https://developer.android.google.cn/reference/androidx/viewpager2/widget/ViewPager2">https://developer.android.google.cn/reference/androidx/viewpager2/widget/ViewPager2</a></p>
<p>[4] <a target="_blank" rel="noopener" href="https://www.journaldev.com/26148/android-viewpager2">https://www.journaldev.com/26148/android-viewpager2</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-03-07T15:43:35.000Z" title="3/7/2019, 11:43:35 PM">2019-03-07</time></span><span class="level-item">22 minutes read (About 3275 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/uncategorized/android-studio%E7%9A%84%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%A8%A1%E7%89%88-templates-%E5%88%9B%E5%BB%BA/">Android Studioçš„ä¸‰ç§ç±»å‹çš„æ¨¡ç‰ˆ(Templates)åˆ›å»º</a></h1><div class="content"><h2 id="Android-Studioçš„ä¸‰ç§ç±»å‹çš„æ¨¡ç‰ˆ-Templates-åˆ›å»º"><a href="#Android-Studioçš„ä¸‰ç§ç±»å‹çš„æ¨¡ç‰ˆ-Templates-åˆ›å»º" class="headerlink" title="Android Studioçš„ä¸‰ç§ç±»å‹çš„æ¨¡ç‰ˆ(Templates)åˆ›å»º"></a>Android Studioçš„ä¸‰ç§ç±»å‹çš„æ¨¡ç‰ˆ(Templates)åˆ›å»º</h2><p>å¦‚æœè¯´ä½¿ç”¨å¿«æ·é”®æ˜¯ç¨‹åºå‘˜çš„åˆ€ğŸ”ªï¼Œé‚£çµæ´»çš„ä½¿ç”¨ä»£ç æ¨¡ç‰ˆå°±åº”è¯¥æ˜¯ç¨‹åºå‘˜çš„å‰‘ã€‚</p>
<p>è¿™é‡Œè¯´çš„æ¨¡ç‰ˆ(Templates)ï¼Œæ˜¯æŒ‡åœ¨ä½¿ç”¨å¼€å‘åˆ›å»ºç±»æ–‡ä»¶ï¼Œç”šè‡³æ˜¯æŸäº›ä»£ç å—æ—¶ï¼ŒIDEè‡ªåŠ¨æŒ‰ç…§è§„å®šçš„æ ¼å¼åˆ›å»ºå‡ºç±»æˆ–ä»£ç çš„åŠŸèƒ½ã€‚å¦‚æœç±»ä¸­æœ‰å¤§é‡ç›¸ä¼¼ä»£ç ï¼Œä½¿ç”¨æ¨¡ç‰ˆå¯ä»¥æå¤§çš„æé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½å‡ºé”™æ¦‚ç‡ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨Android Studioä¸Šä½¿ç”¨<strong>æ¨¡ç‰ˆ</strong>ï¼Œæˆ‘å°†è®²è¿°ä¸‰ç§æ¨¡ç‰ˆçš„åˆ›å»ºï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>ä½¿ç”¨<strong>Live Templates</strong>åˆ›å»ºä»£ç å—æ¨¡ç‰ˆ</li>
<li>ä½¿ç”¨<strong>File and Code Templates</strong>åˆ›å»ºç±»æ¨¡ç‰ˆ</li>
<li><strong>åŸºäºFreeMarker</strong>åˆ›å»ºå¤šæ–‡ä»¶æ¨¡ç‰ˆ</li>
</ul>
<h3 id="1-ä»£ç å—æ¨¡ç‰ˆ"><a href="#1-ä»£ç å—æ¨¡ç‰ˆ" class="headerlink" title="1.ä»£ç å—æ¨¡ç‰ˆ"></a>1.ä»£ç å—æ¨¡ç‰ˆ</h3><p>javaä¸­ç»å¸¸éœ€è¦å®šä¹‰è¿™æ ·çš„é™æ€å¸¸é‡ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_VALUE</span> <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>ä½¿ç”¨Live Templatesåï¼Œå°±å¯ä»¥ç›´æ¥è¾“å…¥constå°±å¯ä»¥å¿«é€Ÿå®šä¹‰é™æ€å¸¸é‡ï¼š</p>
<p><img src="https://s2.ax1x.com/2019/03/08/kxO5IP.png"></p>
<p>å…¶è®¾ç½®æ–¹æ³•æ˜¯ï¼Œæ‰“å¼€File-&gt;Settingï¼ˆâŒ˜+,ï¼‰,æœç´¢â€œLive Templatesâ€ï¼Œæ‰“å¼€å¦‚ä¸‹çš„ç•Œé¢ï¼š</p>
<p><img src="https://s2.ax1x.com/2019/03/08/kxLON6.png"></p>
<p>å…¶ä¸­ï¼Œ<em>1</em>æŒ‡çš„æ˜¯ç¼©å†™å’Œè¯¥ç¼©å†™çš„æè¿°ï¼›<em>2</em>ä¸­è¾“å…¥çš„æ˜¯æ¨¡ç‰ˆçš„å†…å®¹ï¼›<em>3</em>ä¸­å¯ä»¥æŒ‡å®šè¯¥æ¨¡ç‰ˆåº”ç”¨ç”Ÿæ•ˆçš„è¯­è¨€å’Œåœºæ‰€ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥é™åˆ¶è¯¥æ¨¡ç‰ˆåªåº”ç”¨åˆ°Javaè¯­è¨€å®šä¹‰å˜é‡(declaration)çš„æ—¶å€™; <em>4</em>å¯ä»¥å°†æ¨¡ç‰ˆä¸­å˜åŒ–çš„éƒ¨åˆ†å®šä¹‰ä¸ºå˜é‡ï¼Œå¦‚ä¸Šå›¾ä¸­çš„<code>${name}</code>å’Œ<code>${value}</code>     </p>
<p>ä¸Šé¢ä¾‹å­ä¸­çš„constæ˜¯é»˜è®¤çš„æ¨¡ç‰ˆï¼Œä½ å¯ä»¥ç‚¹å‡»åŠ å·æ·»åŠ è‡ªå·±çš„æ¨¡ç‰ˆï¼Œä¾‹å¦‚ä¸ºkotlinå®šä¹‰ä¸€ä¸ªtagå¸¸é‡çš„æ¨¡ç‰ˆï¼š</p>
<p><img src="https://s2.ax1x.com/2019/03/08/kxXswn.png"></p></div><a class="article-more button is-small is-size-7" href="/uncategorized/android-studio%E7%9A%84%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%A8%A1%E7%89%88-templates-%E5%88%9B%E5%BB%BA/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-03-01T13:22:01.000Z" title="3/1/2019, 9:22:01 PM">2019-03-01</time></span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">5 minutes read (About 757 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Android/%E8%B8%A9%E5%9D%91-%E5%A4%8D%E7%94%A8remoteview%E5%AF%BC%E8%87%B4%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%80%BB%E7%BB%93/">è¸©å‘-å¤ç”¨RemoteViewå¯¼è‡´å†…å­˜æ³„æ¼æ€»ç»“</a></h1><div class="content"><h2 id="å¤ç”¨RemoteViewå¯¼è‡´å†…å­˜æ³„æ¼æ€»ç»“"><a href="#å¤ç”¨RemoteViewå¯¼è‡´å†…å­˜æ³„æ¼æ€»ç»“" class="headerlink" title="å¤ç”¨RemoteViewå¯¼è‡´å†…å­˜æ³„æ¼æ€»ç»“"></a>å¤ç”¨RemoteViewå¯¼è‡´å†…å­˜æ³„æ¼æ€»ç»“</h2><h3 id="å…³äºRemoteView"><a href="#å…³äºRemoteView" class="headerlink" title="å…³äºRemoteView"></a>å…³äºRemoteView</h3><p><strong>RemoteView</strong>æ˜¯ä¸€ä¸ªæä¾›è·¨è¿›ç¨‹æ§åˆ¶çš„Viewï¼Œä¸»è¦ç”¨åœ¨é€šçŸ¥æ æˆ–è€…å°éƒ¨ä»¶çš„å¼€å‘ä¸Šã€‚ä¾‹å¦‚éŸ³ä¹ç±»APPè‡ªå®šä¹‰çš„é€šçŸ¥æ æ ·å¼å°±æ˜¯é€šè¿‡RemoteViewå®ç°çš„ã€‚å¦‚æœä½ ä¹‹å‰æ²¡æœ‰å¬è¯´è¿‡RemoteViewï¼Œå¯ä»¥åœ¨è¿™é‡Œç®€å•äº†è§£ä¸€ä¸‹ï¼š</p>
<p>https://www.jianshu.com/p/23041852bd85</p>
<p>RemoteViewä¸­å¯ä»¥ä½¿ç”¨çš„å¸ƒå±€å’Œæ§ä»¶æ˜¯å—é™åˆ¶çš„ï¼Œèƒ½ç”¨çš„å¸ƒå±€æœ‰ï¼š</p>
<ul>
<li><code>AdapterViewFlipper</code></li>
<li><code>FrameLayout</code></li>
<li><code>GridLayout</code></li>
<li><code>GridView</code></li>
<li><code>LinearLayout</code></li>
<li><code>ListView</code></li>
<li><code>RelativeLayout</code></li>
<li><code>StackView</code></li>
<li><code>ViewFlipper</code></li>
</ul>
<p>å¯ä»¥ç”¨çš„æ§ä»¶æœ‰:</p>
<ul>
<li><code>AnalogClock</code></li>
<li><code>Button</code></li>
<li><code>Chronometer</code></li>
<li><code>ImageButton</code></li>
<li><code>ImageView</code></li>
<li><code>ProgressBar</code></li>
<li><code>TextClock</code></li>
<li><code>TextView</code></li>
</ul>
<h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><p>æœ€è¿‘å¼€å‘äº†ä¸€ä¸ªéŸ³ä¹ç±»çš„Appï¼Œæ’­æ”¾éŸ³ä¹æ—¶ä¼šåœ¨é€šçŸ¥æ å¸¸é©»ä¸€ä¸ªè‡ªå®šä¹‰æ ·å¼çš„é€šçŸ¥ï¼Œå…¶ä¸­é€šçŸ¥æ æœ‰ä¸€ä¸ªå¤´åƒæ˜¯é€šè¿‡<code>setImageViewBitmap(int viewId, Bitmap bitmap)</code>æ–¹æ³•è¿›è¡Œè®¾ç½®çš„ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">RemoteViews mRemoteView;  <span class="comment">// å…¨å±€å˜é‡</span></span><br><span class="line"></span><br><span class="line">mRemoteView = <span class="keyword">new</span> <span class="title class_">RemoteViews</span>(Application.getInstance().getPackageName(), resId);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯æ¬¡è°ƒç”¨setImageViewBitmapæ¥æ›´æ–°é€šçŸ¥æ çš„å¤´åƒ</span></span><br><span class="line">mRemoteView.setImageViewBitmap(R.id.cover, bitmap);</span><br></pre></td></tr></tbody></table></figure>

<p>åæ¥å‘ç°å¦‚æœAppè¿ç»­æ”¾æ­Œåœ¨3ä¸ªå°æ—¶å·¦å³æ—¶å°±ä¼šOOMå´©æ‰ï¼Œé€šè¿‡Profileæ£€æŸ¥å†…å­˜åï¼Œå‘ç°æ˜¯å¤´åƒçš„bitmapæ²¡æœ‰é”€æ¯å¯¼è‡´çš„ï¼Œä½†æ˜¯è¿™é‡Œçš„bitmapå¯¹è±¡æ¯æ¬¡ä½¿ç”¨å®Œéƒ½ä¼šrecycleæ‰ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šå†…å­˜æ³„æ¼å‘¢ï¼Ÿç»è¿‡ä¸€ç•ªæ’æŸ¥ï¼Œå‘ç°æ˜¯ä½¿ç”¨åŒä¸€ä¸ª<code>RemoteVIew</code>å¯¹è±¡<code>setImageViewBitmap(R.id.cover, bitmap)</code>å¯¼è‡´çš„ã€‚</p>
<p>åœ¨<code>RemoteView</code>çš„æºç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ª<code>mActions</code>å˜é‡ï¼Œè¿™æ˜¯ä¸€ä¸ª<code>Action</code>çš„åˆ—è¡¨ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * An array of actions to perform on the view tree once it has been</span></span><br><span class="line"><span class="comment">     * inflated</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">private</span> ArrayList&lt;Action&gt; mActions;</span><br></pre></td></tr></tbody></table></figure>

<p>è€ŒActionæ˜¯å…¶å†…éƒ¨å®šä¹‰çš„ä¸€ä¸ªå¯åºåˆ—åŒ–çš„ç±»:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">abstract</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Action</span> <span class="keyword">implements</span> <span class="title class_">Parcelable</span> </span><br></pre></td></tr></tbody></table></figure>

<p>é€šè¿‡è·Ÿè¸ªsetImageViewBitmap(int viewId, Bitmap bitmap)ä¸­bitmapçš„å»å‘ï¼Œå‘ç°æœ€ç»ˆè°ƒç”¨äº†setBitmap()æ–¹æ³•:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBitmap</span><span class="params">(<span class="type">int</span> viewId, String methodName, Bitmap value)</span> {</span><br><span class="line">    addAction(<span class="keyword">new</span> <span class="title class_">BitmapReflectionAction</span>(viewId, methodName, value));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">BitmapReflectionAction</span> <span class="keyword">extends</span> <span class="title class_">Action</span> {</span><br><span class="line">        <span class="type">int</span> bitmapId;</span><br><span class="line">        Bitmap bitmap;</span><br><span class="line">        String methodName;</span><br><span class="line"></span><br><span class="line">        BitmapReflectionAction(<span class="type">int</span> viewId, String methodName, Bitmap bitmap) {</span><br><span class="line">            <span class="built_in">this</span>.bitmap = bitmap;</span><br><span class="line">           ...</span><br><span class="line">        }</span><br><span class="line">		...</span><br><span class="line">            </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeToParcel</span><span class="params">(Parcel dest, <span class="type">int</span> flags)</span> {</span><br><span class="line">            dest.writeInt(TAG);</span><br><span class="line">            dest.writeInt(viewId);</span><br><span class="line">            dest.writeString(methodName);</span><br><span class="line">            dest.writeInt(bitmapId);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">     	...</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥çœ‹å‡ºï¼Œæ¯æ¬¡<code>setImageViewBitmap()</code>ï¼Œéƒ½ä¼šå°†Bitmapåšæˆä¸€ä¸ª<code>BitmapReflectionAction</code>ï¼Œå¹¶æ·»åŠ åˆ°<code>mActions</code>åˆ—è¡¨é‡Œï¼Œè¿™é‡Œçš„<code>BitmapReflectionAction</code>æ˜¯ç»§æ‰¿<code>Action</code>çš„ä¸€ä¸ªå¯åºåˆ—åŒ–çš„ç±»ï¼ŒBitmapåœ¨é‡Œé¢ä½œä¸ºè¢«åºåˆ—åŒ–æˆäº†ä¸€ç»„å€¼æœ€ç»ˆå­˜åˆ°äº†<code>mActions</code>åˆ—è¡¨ä¸­ã€‚åœ¨æºç ä¸­ï¼Œ<code>mActions</code>åˆ—è¡¨åªçœ‹åˆ°æœ‰æ·»åŠ æ“ä½œï¼Œå¹¶æ²¡æœ‰çœ‹åˆ°<code>remove</code>æˆ–è€…<code>clear</code>æ“ä½œï¼Œå¯¼è‡´äº†å†…å­˜æ³„æ¼ã€‚</p>
<h3 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h3><p>ä¸è¦å¤ç”¨<code>RemoteView</code>ï¼Œæ›´æ–°é€šçŸ¥æ iconæ—¶ï¼Œnewä¸€ä¸ªæ–°çš„<code>RemoteView</code>ç»™NotificationCompat.Builder</p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><blockquote>
<p>So internally RemoteViews is simply a set of actions that are
â€œserializedâ€ and sent to another process.  Each time you make a call
to something like setDouble(), youâ€™re adding an additional action to
RemoteViewsâ€™ internal list.</p>
<p>Because there isnâ€™t a way of clearing these actions from a RemoteViews
object, all of your successive setImageViewBitmap() calls, along with
their Bitmaps, remain in the internal list, and are actually
â€œserializedâ€ and applied each time your send it.  :(
In this case itâ€™s best to just create a new RemoteViews object every time.</p>
</blockquote>
<p>https://github.com/rojdes/AngryDict/blob/master/app/src/main/java/me/rds/angrydictionary/widget/BinaryClockWidget.java</p>
<p>https://blog.csdn.net/u013989732/article/details/78501462</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-02-01T12:05:07.000Z" title="2/1/2019, 8:05:07 PM">2019-02-01</time></span><span class="level-item">14 minutes read (About 2158 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/uncategorized/%E5%AF%B9%E4%BD%BF%E7%94%A8viewpager%E7%9A%84%E4%B8%80%E7%82%B9%E7%90%86%E8%A7%A3/">å¯¹ä½¿ç”¨ViewPagerçš„ä¸€ç‚¹ç†è§£</a></h1><div class="content"><p>å¤§å®¶éƒ½ç”¨è¿‡ViewPagerå§ğŸ˜„ï¼Œä½¿ç”¨ViewPageræ—¶ï¼Œéœ€è¦ç»™å®ƒé…ä¸€ä¸ªAdapterï¼Œé€šå¸¸æˆ‘ä»¬è¦ç»§æ‰¿ä¸‹é¢ä¸‰ä¸ªAdapteræ¥ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<p>â€”â€”â€”&gt;æœ€åŸºæœ¬çš„PagerAdapter</p>
<p>â€”â€”â€”â€”â€”â€”&gt;ç»§æ‰¿PagerAdapterçš„FragmentPagerAdapter</p>
<p>â€”â€”â€”â€”â€”â€”&gt;ç»§æ‰¿PagerAdapterçš„FragmentStatePagerAdapter</p>
<p>é‚£ä¹ˆè¿™ä¸‰ä¸ªAdapteræœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿ</p>
<h3 id="1-å…³äºPagerAdapter"><a href="#1-å…³äºPagerAdapter" class="headerlink" title="1.å…³äºPagerAdapter"></a>1.å…³äºPagerAdapter</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœç»§æ‰¿äº†PagerAdapterï¼Œéœ€è¦æˆ‘ä»¬å®ç°ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Return the number of views available.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Create the page for the given position.  The adapter is responsible</span></span><br><span class="line"><span class="comment"> * for adding the view to the container given here, although it only</span></span><br><span class="line"><span class="comment"> * must ensure this is done by the time it returns from</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@link</span> #finishUpdate(ViewGroup)}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> container The containing View in which the page will be shown.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> position The page position to be instantiated.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Returns an Object representing the new page.  This does not</span></span><br><span class="line"><span class="comment"> * need to be a View, but can be some other container of the page.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">instantiateItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position)</span> {</span><br><span class="line">    <span class="keyword">return</span> instantiateItem((View) container, position);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬ä¸€ä¸ªæ˜¯è¦å‘Šè¯‰ViewPagerä¸€å…±æœ‰å‡ ä¸ªé¡µé¢ï¼Œç¬¬äºŒä¸ªåˆ™æ˜¯ViewPageréœ€è¦åŠ è½½é¡µé¢äº†ï¼Œä½ éœ€è¦æ ¹æ®positionåˆ›å»ºä¸åŒçš„é¡µé¢å¯¹è±¡ï¼Œè¿™é‡Œé€šå¸¸æ˜¯Viewå¯¹è±¡ã€‚ </p>
<p>å½“ç„¶ï¼Œå¦‚æœä½ çš„ViewPagerä¸­å†…å®¹æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦ç”¨Fragmentæ¥è‡ªåŠ¨ç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨FragmentPagerAdapterå’ŒFragmentStatePagerAdapterä¸­çš„ä¸€ç§ï¼Œé‚£ä¹ˆä»–ä¿©æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹FragmentPagerAdapterçš„<code>instantiateItem</code>å’Œ<code>destroyItem</code>æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"> 	<span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> Object <span class="title function_">instantiateItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position)</span> {</span><br><span class="line">       ...</span><br><span class="line">       <span class="keyword">final</span> <span class="type">long</span> <span class="variable">itemId</span> <span class="operator">=</span> getItemId(position);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// Do we already have this fragment?</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> makeFragmentName(container.getId(), itemId);</span><br><span class="line">       <span class="type">Fragment</span> <span class="variable">fragment</span> <span class="operator">=</span> mFragmentManager.findFragmentByTag(name);</span><br><span class="line">       <span class="keyword">if</span> (fragment != <span class="literal">null</span>) {</span><br><span class="line">           <span class="keyword">if</span> (DEBUG) Log.v(TAG, <span class="string">"Attaching item #"</span> + itemId + <span class="string">": f="</span> + fragment);</span><br><span class="line">           mCurTransaction.attach(fragment);</span><br><span class="line">       } <span class="keyword">else</span> {</span><br><span class="line">           fragment = getItem(position);</span><br><span class="line">           <span class="keyword">if</span> (DEBUG) Log.v(TAG, <span class="string">"Adding item #"</span> + itemId + <span class="string">": f="</span> + fragment);</span><br><span class="line">           mCurTransaction.add(container.getId(), fragment,</span><br><span class="line">                   makeFragmentName(container.getId(), itemId));</span><br><span class="line">       }</span><br><span class="line">      ...</span><br><span class="line">       <span class="keyword">return</span> fragment;</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position, Object object)</span> {</span><br><span class="line">       <span class="keyword">if</span> (mCurTransaction == <span class="literal">null</span>) {</span><br><span class="line">           mCurTransaction = mFragmentManager.beginTransaction();</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">if</span> (DEBUG) Log.v(TAG, <span class="string">"Detaching item #"</span> + getItemId(position) + <span class="string">": f="</span> + object</span><br><span class="line">               + <span class="string">" v="</span> + ((Fragment)object).getView());</span><br><span class="line">       mCurTransaction.detach((Fragment)object);</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> position)</span> {</span><br><span class="line">       <span class="keyword">return</span> position;</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">makeFragmentName</span><span class="params">(<span class="type">int</span> viewId, <span class="type">long</span> id)</span> {</span><br><span class="line">       <span class="keyword">return</span> <span class="string">"android:switcher:"</span> + viewId + <span class="string">":"</span> + id;</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥çœ‹å‡º<code>instantiateItem</code>æ–¹æ³•åœ¨æ·»åŠ Fragmentæ—¶ï¼Œä¼šå¸¦ä¸€ä¸ªFragmentçš„åå­—ï¼Œå…¶å®å°±æ˜¯Tagï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mCurTransaction.add(container.getId(), fragment, makeFragmentName(container.getId(), itemId));</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™ä¸ªTagæ˜¯æ ¹æ®ä¸€å®šè§„åˆ™ä»<code>makeFragmentName</code>ä¸­è·å¾—çš„ï¼Œè¿™é‡Œå”¯ä¸€å˜åŒ–çš„å°±æ˜¯idï¼Œé»˜è®¤çš„idå¯ä»getItemId(position)ä¸­çœ‹åˆ°ï¼Œå°±æ˜¯å½“å‰çš„positionï¼Œä¿è¯äº†æ¯ä¸ªfragmentçš„tagæ˜¯å”¯ä¸€çš„ã€‚</p>
<p>å½“ViewPageré€šè¿‡<code>instantiateItem</code>è·å–Fragmentçš„æ—¶å€™ï¼Œä¼šå…ˆæ ¹æ®ä¹‹å‰è®¾ç½®çš„Tagæ‰¾ä¸€ä¸‹è¿™ä¸ªFragmentå­˜ä¸å­˜åœ¨ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mFragmentManager.findFragmentByTag(name)</span><br></pre></td></tr></tbody></table></figure>

<p>æ ¹æ®è·å–åˆ°çš„Fragmentæœ‰ä¸¤ç§æ·»åŠ æ–¹å¼ï¼Œå¦‚æœæ ¹æ®Tagæ‰¾åˆ°äº†ä¹‹å‰å­˜åœ¨çš„Fragmentï¼Œå°±attachä¸Šå»ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mCurTransaction.attach(fragment);</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœæ²¡æ‰¾åˆ°ï¼Œé‚£å°±æŠŠæ–°åˆ›å»ºçš„Fragment addä¸Šå»:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mCurTransaction.add(container.getId(), fragment, makeFragmentName(container.getId(), itemId));</span><br></pre></td></tr></tbody></table></figure>

<p>å½“ä¸ç”¨è¿™ä¸ªFragmentçš„æ—¶ï¼Œä¼šè°ƒç”¨<code>destroyItem</code>æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯detachæ‰äº†Fragmentï¼Œå¹¶æ²¡æœ‰é”€æ¯ã€‚</p>
<p>ç»¼ä¸Šï¼Œä¸€ä¸ªé¡µé¢åªä¼šåˆ›å»ºä¸€æ¬¡ï¼Œåˆ›å»ºæ—¶æ ¹æ®å½“å‰çš„positionç»™Fragmentè®¾ç½®ä¸€ä¸ªTagï¼Œå½“ä¸éœ€è¦æ—¶åªæ˜¯æŠŠFragmetn detachæ‰ï¼Œå¹¶ä¸ä¼šé”€æ¯ï¼Œä¸‹æ¬¡éœ€è¦æ—¶é€šè¿‡Tagå¤ç”¨Fragmentã€‚</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ æœ‰å¤§é‡çš„Fragmentè¦å±•ç¤ºï¼ŒFragmentPagerAdapterä¼šæŒæœ‰æ¯ä¸€ä¸ªFragmentä¸é‡Šæ”¾ï¼Œæœ€ç»ˆèµ°å‘OOMã€‚</p>
<p>æ‰€ä»¥ï¼Œæ— è®ºä½¿ç”¨PagerAdapterè¿˜æ˜¯FragmentPagerAdapterï¼Œæœ‰å¤šå°‘é¡µé¢ï¼Œå°±ä¼šåˆ›å»ºå¤šå°‘é¡µé¢å¯¹è±¡ï¼Œé¡µé¢å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œä¼šéå¸¸å ç”¨å†…å­˜ï¼Œè™½ç„¶è¿™æ ·ï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿæœ‰å„è‡ªçš„åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚ï¼ŒAppçš„é¦–æ¬¡å®‰è£…çš„å¯åŠ¨å¼•å¯¼é¡µé¢ä¸ªæ•°æ˜¯å›ºå®šçš„ï¼Œè€Œä¸”å¦‚æœæ¯”è¾ƒå¤æ‚ï¼Œé€šå¸¸åšæˆFragmentï¼Œè¿™æ—¶ä½¿ç”¨FragmentPagerAdapterè¾ƒä¸ºåˆé€‚ï¼›è€Œå¦‚æœé¡µé¢ä¸­æœ‰éœ€è¦è‡ªåŠ¨è½®æ’­å¡ç‰‡çš„åœ°æ–¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨PagerAdapterå®ç°ï¼Œå› ä¸ºå…¶é¡µé¢ä¸€èˆ¬éƒ½æ˜¯Viewï¼Œç»“æ„ç®€å•ï¼Œæ•°é‡ä¹Ÿæ˜¯å›ºå®šçš„ã€‚</p>
<p>é‚£å¦‚æœæˆ‘éœ€è¦åšä¸€ä¸ªå¯ä»¥æ— é™æ»‘åŠ¨çš„å¡ç‰‡ï¼Œå°±éœ€è¦ç”¨åˆ°FragmentStatePagerAdapteräº†ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹FragmentStatePagerAdapterçš„<code>instantiateItem</code>å’Œ<code>destroyItem</code>æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Return the Fragment associated with a specified position.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> Fragment <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> position)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">instantiateItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position)</span> {</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (mCurTransaction == <span class="literal">null</span>) {</span><br><span class="line">        mCurTransaction = mFragmentManager.beginTransaction();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="type">Fragment</span> <span class="variable">fragment</span> <span class="operator">=</span> getItem(position);</span><br><span class="line">    <span class="keyword">while</span> (mFragments.size() &lt;= position) {</span><br><span class="line">        mFragments.add(<span class="literal">null</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line"> 	...</span><br><span class="line">    mCurTransaction.add(container.getId(), fragment);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> fragment;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position, Object object)</span> {</span><br><span class="line">    <span class="type">Fragment</span> <span class="variable">fragment</span> <span class="operator">=</span> (Fragment) object;</span><br><span class="line">    ...</span><br><span class="line">    mCurTransaction.remove(fragment);</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼ŒFragmentStatePagerAdapteråœ¨åˆå§‹åŒ–é¡µé¢æ—¶ï¼Œé€šè¿‡getItemè¿™ä¸ªæŠ½è±¡æ–¹æ³•æ¥è·å¾—Fragmentï¼Œå¹¶å°†å…¶addåˆ°å®¹å™¨é‡Œï¼Œè€Œä¸ç”¨çš„æ—¶å€™ç›´æ¥removeæ‰ï¼Œè¿™æ ·å°±ä¸ä¼šä¸€ç›´å ç”¨Fragmentï¼Œå¯ä»¥å®ç°æ— é™æ»‘åŠ¨ï¼Œå”¯ä¸€å…³å¿ƒçš„å°±æ˜¯åœ¨getItemä¸­åˆ›å»ºä¸€ä¸ªFragmentå°±å¯ä»¥äº†ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘å¯¹ä¸‰ç§PagerAdapterçš„ç®€å•ç†è§£ã€‚åœ¨ä½¿ç”¨ViewPagerçš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†adapterçš„é€‰æ‹©ï¼Œè¿˜éœ€è¦åˆ°äº†ä¸‹é¢çš„é—®é¢˜ã€‚</p>
<h3 id="2-å¸¸è§çš„ä¸¤ä¸ªé—®é¢˜å°æ"><a href="#2-å¸¸è§çš„ä¸¤ä¸ªé—®é¢˜å°æ" class="headerlink" title="2.å¸¸è§çš„ä¸¤ä¸ªé—®é¢˜å°æ"></a>2.å¸¸è§çš„ä¸¤ä¸ªé—®é¢˜å°æ</h3><h5 id="1-notifyDataSetChanged-åé¡µé¢æ²¡æœ‰åˆ·æ–°çš„é—®é¢˜"><a href="#1-notifyDataSetChanged-åé¡µé¢æ²¡æœ‰åˆ·æ–°çš„é—®é¢˜" class="headerlink" title="1.notifyDataSetChanged()åé¡µé¢æ²¡æœ‰åˆ·æ–°çš„é—®é¢˜"></a>1.notifyDataSetChanged()åé¡µé¢æ²¡æœ‰åˆ·æ–°çš„é—®é¢˜</h5><p>è¿™ä¸ªé—®é¢˜ä¸»è¦æ˜¯ç”±äºå½“æ•°æ®æ›´æ–°æ—¶ï¼ŒViewPagerä¼šè°ƒç”¨<code>dataSetChanged</code>æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">dataSetChanged</span><span class="params">()</span> {</span><br><span class="line">    <span class="comment">// This method only gets called if our observer is attached, so mAdapter is non-null.</span></span><br><span class="line"></span><br><span class="line">  	...</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; mItems.size(); i++) {</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ItemInfo</span> <span class="variable">ii</span> <span class="operator">=</span> mItems.get(i);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">newPos</span> <span class="operator">=</span> mAdapter.getItemPosition(ii.object);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (newPos == PagerAdapter.POSITION_UNCHANGED) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (newPos == PagerAdapter.POSITION_NONE) {</span><br><span class="line">            mItems.remove(i);</span><br><span class="line">            i--;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!isUpdating) {</span><br><span class="line">                mAdapter.startUpdate(<span class="built_in">this</span>);</span><br><span class="line">                isUpdating = <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            mAdapter.destroyItem(<span class="built_in">this</span>, ii.position, ii.object);</span><br><span class="line">            needPopulate = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (mCurItem == ii.position) {</span><br><span class="line">                <span class="comment">// Keep the current item in the valid range</span></span><br><span class="line">                newCurrItem = Math.max(<span class="number">0</span>, Math.min(mCurItem, adapterCount - <span class="number">1</span>));</span><br><span class="line">                needPopulate = <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">     ...</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">   ...</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>è¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨adapterçš„getItemPosition()æ¥è·å¾—objectçš„ä½ç½®æƒ…å†µæ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœä¸å‘ç”Ÿå˜åŒ–å°±ä¸æ›´æ–°äº†ï¼Œå¦‚æœè€Œè¿™ä¸ªæ–¹æ³•é»˜è®¤æ˜¯è¿”å›çš„å°±æ˜¯POSITION_UNCHANGEDï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Called when the host view is attempting to determine if an item's position</span></span><br><span class="line"><span class="comment"> * has changed. Returns {<span class="doctag">@link</span> #POSITION_UNCHANGED} if the position of the given</span></span><br><span class="line"><span class="comment"> * item has not changed or {<span class="doctag">@link</span> #POSITION_NONE} if the item is no longer present</span></span><br><span class="line"><span class="comment"> * in the adapter.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;The default implementation assumes that items will never</span></span><br><span class="line"><span class="comment"> * change position and always returns {<span class="doctag">@link</span> #POSITION_UNCHANGED}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> object Object representing an item, previously returned by a call to</span></span><br><span class="line"><span class="comment"> *               {<span class="doctag">@link</span> #instantiateItem(View, int)}.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> object's new position index from [0, {<span class="doctag">@link</span> #getCount()}),</span></span><br><span class="line"><span class="comment"> *         {<span class="doctag">@link</span> #POSITION_UNCHANGED} if the object's position has not changed,</span></span><br><span class="line"><span class="comment"> *         or {<span class="doctag">@link</span> #POSITION_NONE} if the item is no longer present.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemPosition</span><span class="params">(Object object)</span> {</span><br><span class="line">    <span class="keyword">return</span> POSITION_UNCHANGED;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰€ä»¥è¦æƒ³æ¯æ¬¡åˆ·æ–°éƒ½è®©é¡µé¢æ›´æ–°ï¼Œéœ€è¦åœ¨adapterä¸­é‡å†™getItemPositionæ–¹æ³•ï¼Œå¹¶è¿”å›POSITION_NONEå°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemPosition</span><span class="params">(Object object)</span> {</span><br><span class="line">    <span class="keyword">return</span> POSITION_NONE;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="2-åˆå§‹åŒ–æ•°æ®æ—¶ä¸ä¼šè°ƒç”¨OnPageChangeListener"><a href="#2-åˆå§‹åŒ–æ•°æ®æ—¶ä¸ä¼šè°ƒç”¨OnPageChangeListener" class="headerlink" title="2.åˆå§‹åŒ–æ•°æ®æ—¶ä¸ä¼šè°ƒç”¨OnPageChangeListener"></a>2.åˆå§‹åŒ–æ•°æ®æ—¶ä¸ä¼šè°ƒç”¨OnPageChangeListener</h5><p>ç›¸ä¿¡å¤§å®¶éƒ½é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Œå°±æ˜¯ViewPageråˆå§‹åŒ–æ—¶å¹¶ä¸ä¼šè°ƒç”¨OnPageChangeListenerï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½æ˜¯æ‰‹åŠ¨è°ƒç”¨ç¬¬ä¸€é¡µçš„onPageSelectedæ–¹æ³•:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="keyword">private</span> ViewPager.<span class="type">OnPageChangeListener</span> <span class="variable">onPageChangeListener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewPager</span>.OnPageChangeListener() {</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageScrolled</span><span class="params">(<span class="type">int</span> position, <span class="type">float</span> positionOffset, <span class="type">int</span> positionOffsetPixels)</span> {</span><br><span class="line"></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageSelected</span><span class="params">(<span class="type">int</span> position)</span> {</span><br><span class="line"></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageScrollStateChanged</span><span class="params">(<span class="type">int</span> state)</span> {</span><br><span class="line"></span><br><span class="line">      }</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">OnCreate</span><span class="params">()</span>{</span><br><span class="line">      ...</span><br><span class="line">      mViewPager.setOnPageChangeListener(onPageChangeListener);</span><br><span class="line">onPageChangeListener.onPageSelected(<span class="number">0</span>);  <span class="comment">// æ‰‹åŠ¨è°ƒç”¨ç¬¬ä¸€é¡µ</span></span><br><span class="line">      ...</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>ä½†æ˜¯å¦‚æœå¦‚æœä½ ä½¿ç”¨çš„æ˜¯FragmentPagerAdapteræ—¶ï¼Œä¼šå‘ç°åœ¨onPageSelected(0)æ—¶ï¼Œä¼šå‘ç°Fragmentè¿˜æ²¡æœ‰åˆ›å»ºæˆåŠŸï¼Œè¿™æ—¶å€™ä¼šå‡ºç°NPE(NullPointerException)ã€‚æ‰€ä»¥è¿™æ—¶å€™å¯ä»¥è¿™æ ·å†™ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mViewPager.post(<span class="keyword">new</span> <span class="title class_">Runnable</span>(){</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">        onPageChangeListener.onPageSelected(<span class="number">0</span>);  <span class="comment">// æ‰‹åŠ¨è°ƒç”¨ç¬¬ä¸€é¡µ</span></span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™æ ·å°±ä¼šåœ¨viewpagerçš„UIäº‹ä»¶é˜Ÿåˆ—å®Œæˆåå¤„ç†onPageSelectedæ–¹æ³•çš„å†…å®¹ï¼Œè¿™ä¸ªæ—¶å€™Fragmentå·²ç»å¥½äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œè™½ç„¶è¿™æ ·ï¼Œè®²è¦è¿›è¡Œçš„å·¥ä½œäº¤ç»™postä¼šæ‰“ä¹±åŒæ­¥æ—¶åºï¼Œè®©è¦åšçš„äº‹å……æ»¡äº†ä¸ç¡®å®šæ€§ï¼Œæˆ‘ä¸çŸ¥é“å®ƒä»€ä¹ˆæ—¶å€™èƒ½è°ƒç”¨onPageSelectedæ–¹æ³•ã€‚è€Œä¸”è¿™æ ·åšä¹Ÿå­˜åœ¨å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå½“ä½¿ç”¨notifyDataSetChanged()åˆ·æ–°æ•°æ®æ—¶ï¼Œè¿˜æ˜¯ä¸ä¼šè°ƒç”¨å½“å‰é¡µçš„onPageSelectedæ¥æ›´æ–°å½“å‰é¡µé¢ï¼Œæ‰€ä»¥æˆ‘æ›´å€¾å‘äºä¸‹é¢è¿™ç§æ–¹æ³•:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPagerAdapter</span> <span class="keyword">extends</span> <span class="title class_">FragmentStatePagerAdapter</span> {</span><br><span class="line">    ...</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">private</span> Object lastPrimaryItem;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> OnPageSwitchListener onPageSwitchListener;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyPagerAdapter</span><span class="params">(FragmentManager fm, OnPageSwitchListener onPageSwitchListener)</span> {</span><br><span class="line">        <span class="built_in">super</span>(fm);</span><br><span class="line">        <span class="built_in">this</span>.onPageSwitchListener = onPageSwitchListener;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrimaryItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position, Object object)</span> {</span><br><span class="line">        <span class="built_in">super</span>.finishUpdate(container);</span><br><span class="line">        <span class="built_in">super</span>.setPrimaryItem(container, position, object);</span><br><span class="line">        <span class="keyword">if</span> (object == lastPrimaryItem) {</span><br><span class="line">            <span class="keyword">return</span>;  <span class="comment">// setPrimaryItemä¼šå¤šæ¬¡è°ƒç”¨ï¼Œè¿‡æ»¤æ‰å¤šä½™çš„è°ƒç”¨</span></span><br><span class="line">        }</span><br><span class="line">        lastPrimaryItem = object;</span><br><span class="line">        <span class="type">MyFragment</span> <span class="variable">fragment</span> <span class="operator">=</span> (MyFragment)object;</span><br><span class="line">        <span class="keyword">if</span> (onPageSwitchListener != <span class="literal">null</span> &amp;&amp; fragment != <span class="literal">null</span>) {</span><br><span class="line">            onPageSwitchListener.onPageSwitch(position, fragment);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">finishUpdate</span><span class="params">(ViewGroup container)</span> {</span><br><span class="line">		<span class="comment">// è¿™é‡Œå°†finishUpdateæ”¾åˆ°setPrimaryItemä¹‹å‰æ‰§è¡Œï¼Œè§ä¸Šé¢çš„æ–¹æ³•ğŸ‘†</span></span><br><span class="line">        <span class="comment">// åŸå› æ˜¯finishUpdateåçš„Fragmentæ‰ç®—æ­£å¼å¯ä»¥ç”¨äº†</span></span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnPageSwitchListener</span>{</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">onPageSwitch</span><span class="params">(<span class="type">int</span> position, MyFragment fragment)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyActivity</span> <span class="keyword">extends</span> <span class="title class_">Activity</span> <span class="keyword">implements</span> <span class="title class_">MyPagerAdapter</span>.OnPageSwitchListener{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageSwitch</span><span class="params">(<span class="type">int</span> position, MyFragment fragment)</span> {</span><br><span class="line">    	<span class="comment">// Do whatever you like here. :)</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç®€å•è¯´å°±æ˜¯ï¼ŒPagerAdapterä¸­æœ‰ä¸€ä¸ªé‡è¦çš„æ–¹æ³•å«<code>setPrimaryItem</code>ï¼Œå½“ä¸€ä¸ªé¡µé¢æ˜¾ç¤ºçš„æ—¶å€™éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼ˆå¤šæ¬¡ï¼‰ï¼Œé€šè¿‡ä¸€äº›ç®€å•çš„å¤„ç†ï¼Œå¯ä»¥å®ç°ä¸mViewPager.setOnPageChangeListener()ç±»ä¼¼çš„åŠŸèƒ½ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡è°ƒç”¨onPageChangeListener.onPageSelected(0)æˆ–è€…ä½¿ç”¨Postæ“ä½œäº†ã€‚</p>
<p>ä»¥ä¸Šåˆ†æè¾ƒä¸ºè‚¤æµ…ï¼Œæœ‰é—®é¢˜æ¬¢è¿æŒ‡æ­£ã€è¡¥å……ï¼Œè°¢è°¢ğŸ™</p>
<p>å‚è€ƒ</p>
<p>[1] https://stackoverflow.com/questions/16074058/onpageselected-doesnt-work-for-first-page</p>
<p>[2] https://stackoverflow.com/questions/11794269/onpageselected-isnt-triggered-when-calling-setcurrentitem0</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-12-29T12:02:48.000Z" title="12/29/2018, 8:02:48 PM">2018-12-29</time></span><span class="level-item">9 minutes read (About 1298 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/uncategorized/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8A%E6%89%8B/">æ­£åˆ™è¡¨è¾¾å¼ä¸Šæ‰‹</a></h1><div class="content"><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯è®¡ç®—æœºä¸–ç•Œé‡Œçš„åŸºç¡€æŠ€èƒ½ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯å»ºç«‹åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¹‹ä¸Šã€‚å­¦ä¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¼šå¸®åŠ©ä½ ç†è§£æ›´å¤šï¼Œä¹‹å‰å¯¹æ­£åˆ™è¡¨è¾¾å¼æ€»æ˜¯éå¸¸æ•¬ç•ï¼Œæ„Ÿè§‰å¾ˆéš¾ä¸Šæ‰‹ï¼Œç›´åˆ°çœ‹äº†è€å§šçš„ã€ŠJavaScript æ­£åˆ™è¡¨è¾¾å¼è¿·ä½ ä¹¦ã€‹ï¼Œæ‰æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨ï¼Œæœ‰æ—¶é—´çš„æœ‹å‹å¯ä»¥å»è¯»ä¸€ä¸‹ï¼Œä¸è¦è¢«ä¹¦åä¸­çš„JavaScriptå“åˆ°ï¼Œè¿™æœ¬ä¹¦å…¶å®è·ŸæŸç§è¯­è¨€å…³ç³»ä¸å¤§ã€‚<a target="_blank" rel="noopener" href="https://github.com/qdlaoyao/js-regex-mini-book">ä»»æ„é—¨</a></p>
<p>ä¸‹é¢è®²æˆ‘è®¤ä¸ºä¹¦ä¸­è¾ƒä¸ºé‡è¦çš„ç‚¹è®°åœ¨ä¸‹é¢ï¼š</p>
<p>é¦–å…ˆï¼Œæ­£åˆ™æ˜¯ä»€ä¹ˆï¼Ÿæ­£åˆ™æ˜¯åŒ¹é…æ¨¡å¼ï¼Œè¦ä¹ˆåŒ¹é…å­—ç¬¦ï¼Œè¦ä¹ˆåŒ¹é…ä½ç½®ã€‚ï¼ˆåŒ¹é…å¯ä»¥ç†è§£ä¸ºæœç´¢çš„æ„æ€ï¼‰</p>
<h4 id="åŒ¹é…å­—ç¬¦ï¼š"><a href="#åŒ¹é…å­—ç¬¦ï¼š" class="headerlink" title="åŒ¹é…å­—ç¬¦ï¼š"></a>åŒ¹é…å­—ç¬¦ï¼š</h4><p>ä¸€ä¸ªæ­£åˆ™åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå…·ä½“åˆ°æŸä¸€ä½å­—ç¬¦æ—¶ï¼Œå®ƒå¯ä»¥ä¸æ˜¯æŸä¸ªç¡®å®šçš„å­—ç¬¦ï¼Œå¯ä»¥æœ‰å¤šç§å¯èƒ½ã€‚</p>
<p>å…¶å®ç°çš„æ–¹å¼æ˜¯ä½¿ç”¨å­—ç¬¦ç»„ã€‚è­¬å¦‚[abc]ï¼Œè¡¨ç¤ºè¯¥å­—ç¬¦æ˜¯å¯ä»¥å­—ç¬¦â€œaâ€ã€â€œbâ€ã€â€œcâ€ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œä¸­æ‹¬å·é‡Œå¯ä»¥å†™ä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ï¼Œé—®å·ç­‰ã€‚</p>
<h4 id="åŒ¹é…ä½ç½®ï¼š"><a href="#åŒ¹é…ä½ç½®ï¼š" class="headerlink" title="åŒ¹é…ä½ç½®ï¼š"></a>åŒ¹é…ä½ç½®ï¼š</h4><p>ä¸€ä¸ªæ­£åˆ™å¯åŒ¹é…çš„å­—ç¬¦ä¸²çš„é•¿åº¦ä¸æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥æ˜¯å¤šç§æƒ…å†µçš„ã€‚</p>
<p>å…¶å®ç°çš„æ–¹å¼æ˜¯ä½¿ç”¨é‡è¯ã€‚è¡¨ç¤ºè­¬å¦‚{m,n}ï¼Œè¡¨ç¤ºè¿ç»­å‡ºç°æœ€å°‘mæ¬¡ï¼Œæœ€å¤šnæ¬¡</p>
<p>å…¶å®åªè¦æ˜ç™½äº†åŒ¹é…ä½ç½®çš„æ–¹æ³•{m,n}å’ŒåŒ¹é…å­—ç¬¦çš„æ–¹æ³•[è¿™é‡Œå¯ä»¥å†™ä»»æ„å¤šçš„å­—ç¬¦]ï¼Œå°±å¯ä»¥å®ç°99.999%çš„æ­£åˆ™è¡¨è¾¾å¼é—®é¢˜ã€‚</p>
<p>è‡³äºå…¶ä»–çš„ä½ çœ‹åˆ°å…³äºæ­£åˆ™è¡¨è¾¾å¼çš„çŸ¥è¯†éƒ½æ˜¯å»ºç«‹åœ¨è¿™ä¸¤ä¸ªåŸºç¡€èƒ½åŠ›ä¹‹ä¸Šçš„ï¼Œè¦ä¹ˆæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œåˆ›å»ºäº†å‡ ä¸ªç®€å•çš„å†™æ³•ï¼Œä¾‹å¦‚[0-5]=[012345]ï¼Œåˆä¾‹å¦‚\d=[0-9]ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨æ–¹æ‹¬å·é‡Œå†™å¤ªå¤šçš„å­—ç¬¦ï¼ŒåŒæ—¶ä¹Ÿå¢å¼ºäº†å¯è¯»æ€§ã€‚</p>
<p>ä¸‹é¢å°±ä»‹ç»ä¸€äº›ä¸ºäº†æ–¹ä¾¿å®ç°ä¸Šé¢ä¸¤ç§åŒ¹é…è€Œäº§ç”Ÿçš„å„ç§ç®€å†™ï¼š</p>
<p><strong>1.è¡¨ç¤ºå­—ç¬¦</strong></p>
<p>å¦‚æœå­—ç¬¦ç»„é‡Œçš„å­—ç¬¦ç‰¹åˆ«å¤šçš„è¯ï¼Œæ€ä¹ˆåŠï¼Ÿå‡å¦‚æˆ‘æƒ³åŒ¹é…æ‰€æœ‰çš„å­—ç¬¦ï¼Œæ€»ä¸èƒ½æŠŠæ‰€æœ‰çš„å­—ç¬¦éƒ½è¾“å…¥åˆ°ä¸­æ‹¬å·å†…å§ï¼Ÿ</p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿå¯ä»¥å†™æˆè¿™æ ·çš„ç¼©å†™ï¼š</p>
<ul>
<li><p>æ¯”å¦‚[123456abcdefGHIJKLM]ï¼Œå¯ä»¥å†™æˆ**[1-6a-fG-M]*<em>ã€‚ç”¨è¿å­—ç¬¦â€-â€œæ¥çœç•¥å’Œç®€å†™ã€‚</em>ï¼ˆé‚£ä¹ˆè¦åŒ¹é…â€œaâ€ã€â€œ-â€ã€â€œzâ€è¿™ä¸‰è€…ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå¯ä»¥å†™æˆå¦‚ä¸‹çš„æ–¹å¼ï¼š[-az]æˆ–[az-]æˆ–[a-z]ã€‚å³è¦ä¹ˆæ”¾åœ¨å¼€å¤´ï¼Œè¦ä¹ˆæ”¾åœ¨ç»“å°¾ï¼Œè¦ä¹ˆè½¬ä¹‰ã€‚ï¼‰*</p>
</li>
<li><p>**[^abc]**ï¼Œè¡¨ç¤ºæ˜¯ä¸€ä¸ªé™¤â€aâ€ã€â€bâ€ã€â€câ€ä¹‹å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚å­—ç¬¦ç»„çš„ç¬¬ä¸€ä½æ”¾â€^â€ï¼ˆè„±å­—ç¬¦ï¼‰ï¼Œè¡¨ç¤ºæ±‚åçš„æ¦‚å¿µ</p>
</li>
<li><p><strong>\d</strong> å°±æ˜¯<code>[0-9]</code>ã€‚è¡¨ç¤ºæ˜¯ä¸€ä½æ•°å­—ã€‚è®°å¿†æ–¹å¼ï¼šå…¶è‹±æ–‡æ˜¯digitï¼ˆæ•°å­—ï¼‰ã€‚</p>
</li>
<li><p><strong>\D</strong> å°±æ˜¯<code>[^0-9]</code>ã€‚è¡¨ç¤ºé™¤æ•°å­—å¤–çš„ä»»æ„å­—ç¬¦ã€‚</p>
</li>
<li><p><strong>\w</strong> å°±æ˜¯<code>[0-9a-zA-Z_]</code>ã€‚è¡¨ç¤ºæ•°å­—ã€å¤§å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ã€‚è®°å¿†æ–¹å¼ï¼šwæ˜¯wordçš„ç®€å†™ï¼Œä¹Ÿç§°å•è¯å­—ç¬¦ã€‚</p>
</li>
<li><p><strong>\W</strong> å°±æ˜¯<code>[^0-9a-zA-Z_]</code>ã€‚éå•è¯å­—ç¬¦ã€‚</p>
</li>
<li><p><strong>\s</strong> å°±æ˜¯<code>[ \t\v\n\r\f]</code>ã€‚è¡¨ç¤ºç©ºç™½ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€æ°´å¹³åˆ¶è¡¨ç¬¦ã€å‚ç›´åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ã€å›è½¦ç¬¦ã€æ¢é¡µç¬¦ã€‚è®°å¿†æ–¹å¼ï¼šsæ˜¯space characterçš„é¦–å­—æ¯ã€‚</p>
</li>
<li><p><strong>\S</strong> å°±æ˜¯<code>[^ \t\v\n\r\f]</code>ã€‚ éç©ºç™½ç¬¦ã€‚</p>
</li>
<li><p><strong>.</strong> å°±æ˜¯<code>[^\n\r\u2028\u2029]</code>ã€‚é€šé…ç¬¦ï¼Œè¡¨ç¤ºå‡ ä¹ä»»æ„å­—ç¬¦ã€‚æ¢è¡Œç¬¦ã€å›è½¦ç¬¦ã€è¡Œåˆ†éš”ç¬¦å’Œæ®µåˆ†éš”ç¬¦é™¤å¤–ã€‚è®°å¿†æ–¹å¼ï¼šæƒ³æƒ³çœç•¥å·â€¦ä¸­çš„æ¯ä¸ªç‚¹ï¼Œéƒ½å¯ä»¥ç†è§£æˆå ä½ç¬¦ï¼Œè¡¨ç¤ºä»»ä½•ç±»ä¼¼çš„ä¸œè¥¿ã€‚</p>
<p>å¦‚æœè¦åŒ¹é…ä»»æ„å­—ç¬¦æ€ä¹ˆåŠï¼Ÿå¯ä»¥ä½¿ç”¨[\d\D]ã€[\w\W]ã€[\s\S]å’Œ[^]ä¸­ä»»ä½•çš„ä¸€ä¸ªã€‚</p>
</li>
</ul>
<p><strong>2.è¡¨ç¤ºä½ç½®</strong>ï¼ˆæ•°é‡ï¼‰</p>
<ul>
<li><p><strong>{m,}</strong> è¡¨ç¤ºè‡³å°‘å‡ºç°mæ¬¡ã€‚</p>
</li>
<li><p><strong>{m}</strong> ç­‰ä»·äº<code>{m,m}</code>ï¼Œè¡¨ç¤ºå‡ºç°mæ¬¡ã€‚</p>
</li>
<li><p><strong>?</strong>  ç­‰ä»·äº<code>{0,1}</code>ï¼Œè¡¨ç¤ºå‡ºç°æˆ–è€…ä¸å‡ºç°ã€‚è®°å¿†æ–¹å¼ï¼šé—®å·çš„æ„æ€è¡¨ç¤ºï¼Œæœ‰å—ï¼Ÿ</p>
</li>
</ul>
<ul>
<li><strong>+</strong>  ç­‰ä»·äº<code>{1,}</code>ï¼Œè¡¨ç¤ºå‡ºç°è‡³å°‘ä¸€æ¬¡ã€‚è®°å¿†æ–¹å¼ï¼šåŠ å·æ˜¯è¿½åŠ çš„æ„æ€ï¼Œå¾—å…ˆæœ‰ä¸€ä¸ªï¼Œç„¶åæ‰è€ƒè™‘è¿½åŠ ã€‚</li>
</ul>
<ul>
<li>*** ** ç­‰ä»·äº<code>{0,}</code>ï¼Œè¡¨ç¤ºå‡ºç°ä»»æ„æ¬¡ï¼Œæœ‰å¯èƒ½ä¸å‡ºç°ã€‚è®°å¿†æ–¹å¼ï¼šçœ‹çœ‹å¤©ä¸Šçš„æ˜Ÿæ˜Ÿï¼Œå¯èƒ½ä¸€é¢—æ²¡æœ‰ï¼Œå¯èƒ½é›¶æ•£æœ‰å‡ é¢—ï¼Œå¯èƒ½æ•°ä¹Ÿæ•°ä¸è¿‡æ¥ã€‚</li>
</ul>
<h4 id="ä¸¾ä¾‹è¯´æ˜ğŸŒ°"><a href="#ä¸¾ä¾‹è¯´æ˜ğŸŒ°" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜ğŸŒ°"></a>ä¸¾ä¾‹è¯´æ˜ğŸŒ°</h4><p>æ˜ç™½äº†åŸºæœ¬ç”¨æ³•ï¼Œå°±éœ€è¦å‡ ä¸ªä¾‹å­æ¥å®éªŒä¸€ä¸‹äº†ã€‚å¦‚æœè¦åœ¨ç›®å½•ä¸­æœç´¢æ–‡ä»¶å¤¹åå­—ä¸­æœ‰Utilçš„æ–‡ä»¶ï¼Œè€Œä¸”åªæ˜¾ç¤ºDreamReaderæ–‡ä»¶å¤¹ä¸­çš„ç»“æœï¼Œé‚£æˆ‘å¯ä»¥è¿™æ ·æœ:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./* | grep -e ".*Dream.*StringUtil"</span><br></pre></td></tr></tbody></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-12-26T12:49:46.000Z" title="12/26/2018, 8:49:46 PM">2018-12-26</time></span><span class="level-item">4 minutes read (About 629 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/uncategorized/%E5%9D%91-textview%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8maxlines-1%E5%92%8Cellipsize%E6%97%B6%E5%81%B6%E5%8F%91%E5%B4%A9%E6%BA%83/">å‘--TextViewåŒæ—¶ä½¿ç”¨maxLines=1å’Œellipsizeæ—¶å¶å‘å´©æºƒ</a></h1><div class="content"><p>ä»Šå¤©å‘ç°é¡¹ç›®çš„æŠ¥é”™è®°å½•ä¸­æ’åç¬¬ä¸€çš„æ˜¯<code>ArrayIndexOutOfBoundsException</code>é”™è¯¯ï¼Œå½±å“ç”¨æˆ·84ï¼Œå‘ç”Ÿæ¬¡æ•°129ã€‚</p>
<p>æŠ¥é”™å †æ ˆå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> android.text.StaticLayout.getLineTop(StaticLayout.java:<span class="number">878</span>)</span><br><span class="line"><span class="number">2</span> android.widget.TextView.getExtendedPaddingTop(TextView.java:<span class="number">1966</span>)</span><br><span class="line"><span class="number">3</span> android.widget.TextView.bringTextIntoView(TextView.java:<span class="number">7291</span>)</span><br><span class="line"><span class="number">4</span> android.widget.TextView.onPreDraw(TextView.java:<span class="number">5107</span>)</span><br><span class="line"><span class="number">5</span> android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:<span class="number">944</span>)</span><br><span class="line"><span class="number">6</span> android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:<span class="number">2348</span>)</span><br><span class="line"><span class="number">7</span> android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:<span class="number">1292</span>)</span><br><span class="line"><span class="number">8</span> android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:<span class="number">6598</span>)</span><br><span class="line"><span class="number">9</span> android.view.Choreographer$CallbackRecord.run(Choreographer.java:<span class="number">800</span>)</span><br><span class="line"><span class="number">10</span> android.view.Choreographer.doCallbacks(Choreographer.java:<span class="number">603</span>)</span><br><span class="line"><span class="number">11</span> android.view.Choreographer.doFrame(Choreographer.java:<span class="number">572</span>)</span><br><span class="line"><span class="number">12</span> android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:<span class="number">786</span>)</span><br><span class="line"><span class="number">13</span> android.os.Handler.handleCallback(Handler.java:<span class="number">815</span>)</span><br><span class="line"><span class="number">14</span> android.os.Handler.dispatchMessage(Handler.java:<span class="number">104</span>)</span><br><span class="line"><span class="number">15</span> android.os.Looper.loop(Looper.java:<span class="number">194</span>)</span><br><span class="line"><span class="number">16</span> android.app.ActivityThread.main(ActivityThread.java:<span class="number">5682</span>)</span><br><span class="line"><span class="number">17</span> java.lang.reflect.Method.invoke(Native Method)</span><br><span class="line"><span class="number">18</span> java.lang.reflect.Method.invoke(Method.java:<span class="number">372</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>ä»é”™è¯¯å †æ ˆé‡Œå¹¶æ²¡æœ‰æ‰¾åˆ°ç‰¹åˆ«æœ‰ç”¨çš„ä¿¡æ¯ã€‚</p>
<p>äºæ˜¯å»çœ‹äº†ä¸‹æŠ¥é”™çš„è®¾å¤‡ä¿¡æ¯ï¼š</p>
<p>| æœºå‹è®¾å¤‡ Top 5        | ç³»ç»Ÿç‰ˆæœ¬ Top 5                  |
| â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- |
| åä¸º TIT-TL00  11.26% | Android 5.1,level 22   31.40%   |
| ä¸‰æ˜Ÿ GT-I908   26.48% | Android 4.1.2,level 16   20.48% |
| è£è€€ CUN AL00   6.14% | Android 4.0.4,level 15   10.92% |
| åä¸º TAG-TL00   5.46% | Android 7.0   8.19%             |
| HTC T327T   4.44%     | Android 4.0.3,level 15   7.85%  |</p>
<p>å¯è°“æ˜¯äº”èŠ±å…«é—¨ï¼Œçœ‹æ¥ä¹Ÿä¸æ˜¯ç‰¹å®šæœºå‹æˆ–è€…ç‰¹å®šç³»ç»Ÿçš„é—®é¢˜ã€‚</p>
<p>ä»æ—¥å¿—å’Œè®¾å¤‡ä¿¡æ¯éƒ½åˆ†æä¸å‡ºé—®é¢˜ï¼Œåªèƒ½é googleäº†ï¼Œé€šè¿‡ä¸æ–­çš„æœç´¢ï¼Œæ¸æ¸å‘ç°ç±»ä¼¼çš„å´©æºƒè·ŸTextViewçš„ä¸¤ä¸ªå±æ€§æœ‰å…³ç³»ï¼Œåˆ†åˆ«æ˜¯:</p>
<ul>
<li>Android:maxLines</li>
<li>Android:ellipsize</li>
</ul>
<p>æ ¹æ®æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œå¾—å‡ºäº†ä¸‹é¢çš„ç»“è®ºï¼š</p>
<p>å¦‚æœåŒæ—¶è®¾ç½®äº†ellipsizeå’ŒmaxLine=1,å°±ä¼šåœ¨æŸäº›æœºå‹ä¸Šäº§ç”Ÿå´©æºƒï¼ˆä¸æ˜¯å¿…å…ˆï¼‰ï¼ŒæŠ¥ArrayIndexOutOfBoundsExceptionçš„å¼‚å¸¸ã€‚è§£å†³åŠæ³•å°±æ˜¯å°†maxLine=1æ¢æˆå·²ç»åºŸå¼ƒçš„singleLine=trueã€‚è¿™æ˜¯Androidç³»ç»Ÿçš„ä¸€ä¸ªbugï¼Œç›®å‰è¿˜æ²¡æœ‰è§£å†³ã€‚</p>
<p>ä¸‹é¢æŸ¥è¯¢åˆ°çš„ç›¸å…³è®°å½•ï¼š</p>
<p>If you try to use <code>maxLines=1</code> with <code>ellipsize</code>, you shall get the following lint error (refer to <a target="_blank" rel="noopener" href="https://issuetracker.google.com/issues/36950033">this discussion</a>)</p>
<blockquote>
<p>Combining ellipsize and maxLines=1 can lead to crashes on some devices. Earlier versions of lint recommended replacing singleLine=true with maxLines=1 but that should not be done when using ellipsize</p>
</blockquote>
<p>æ¥æºï¼šhttps://code.luasoftware.com/tutorials/android/android-textview-singleline-with-ellipsis/</p>
<hr>
<p>é—®é¢˜ Crash when using ellipsize=â€startâ€ (Jelly Bean) çš„å›å¤</p>
<p>riâ€¦@gmail.com <a href="mailto:ri...@gmail.com">ri...@gmail.com</a> <a target="_blank" rel="noopener" href="https://issuetracker.google.com/issues/36950033#comment3">#3</a>Jul 12, 2012 08:17AM </p>
<p><strong>I do notice that changing android:lines=â€1â€ to android:singleLine=â€trueâ€ causes the crash not to happen.</strong></p>
<p>æ¥æº:https://issuetracker.google.com/issues/36950033</p>
<hr>
<p>I faced what I suspect is the same problem in my own app. For me, it was happening because I was using <code>android:ellipsize="start"</code> <strong>without</strong> also using <code>android:singleLine="true"</code>.</p>
<p>We had switched all of our <code>android:singleLine="true"</code> attributes to the recommended <code>android:maxLines="1"</code>, but it turns out that thereâ€™s a bug in how the system calculates the ellipsis that is triggered if <code>singleLine</code> isnâ€™t present.</p>
<p>So I believe you can solve this issue by simply adding <code>android:singleLine="true"</code> to your <code>TextView</code>s that are using <code>ellipsize</code> attrs.</p>
<p>æ¥æºï¼šhttps://stackoverflow.com/questions/45487427/crashlytics-reporting-multiples-issues-for-textview-makesinglelayout</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-10-11T16:29:10.000Z" title="10/12/2018, 12:29:10 AM">2018-10-12</time></span><span class="level-item"><a class="link-muted" href="/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</a></span><span class="level-item">22 minutes read (About 3294 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E5%B7%A5%E5%85%B7/%E5%9F%BA%E4%BA%8Emainframer%E8%BF%9B%E8%A1%8C%E8%BF%9C%E7%A8%8B%E7%BC%96%E8%AF%91%EF%BC%88%E4%BB%A5android%E5%BC%80%E5%8F%91%E4%B8%BA%E4%BE%8B%EF%BC%89/">åŸºäºMainFramerè¿›è¡Œè¿œç¨‹ç¼–è¯‘ï¼ˆä»¥Androidå¼€å‘ä¸ºä¾‹ï¼‰</a></h1><div class="content"><h3 id="ä¸€ã€æ•…äº‹èƒŒæ™¯ï¼ˆå¯ç•¥è¿‡ï¼‰"><a href="#ä¸€ã€æ•…äº‹èƒŒæ™¯ï¼ˆå¯ç•¥è¿‡ï¼‰" class="headerlink" title="ä¸€ã€æ•…äº‹èƒŒæ™¯ï¼ˆå¯ç•¥è¿‡ï¼‰"></a>ä¸€ã€æ•…äº‹èƒŒæ™¯ï¼ˆå¯ç•¥è¿‡ï¼‰</h3><blockquote>
<p>ä»¥å‰ï¼Œä¸–ç•Œä¸Šåªæœ‰ä¸¤ç§ç”µè„‘ï¼šç¬”è®°æœ¬å’Œå°å¼æœºã€‚</p>
<p>ä¸Šå¸è¯´ï¼Œè¦æœ‰é«˜æ€§èƒ½çš„ç¬”è®°æœ¬ã€‚äºæ˜¯ï¼Œå°±æœ‰äº†MainFramerã€‚</p>
</blockquote>
<p>æˆ‘å°±é‡åˆ°äº†è¿™ç§æƒ…å†µï¼Œä¸Šç­åå…¬å¸é…çš„æ˜¯MacBookProçš„ç¬”è®°æœ¬å’Œä¸€ä¸ªWindowsçš„å°å¼æœºï¼ˆPCï¼‰ï¼Œæˆ‘æ›¾å°è¯•è¿‡ä½¿ç”¨MacBookä½œä¸ºä¸»åŠ›æœºå·¥ä½œï¼ŒMacOSçš„ä½“éªŒéå¸¸ä¼˜ç§€ï¼Œä½†æ˜¯å”¯ä¸€çš„ä¸è¶³å°±æ˜¯å…¶åœ¨å¤„ç†å¤§å‹å¤æ‚ä»»åŠ¡æ—¶çš„é€Ÿåº¦è¿œä¸å¦‚æˆ‘é‚£å°é«˜é…çš„å°å¼æœºï¼Œç¼–è¯‘ä¸€æ¬¡å·¥ç¨‹çš„æ—¶é—´å·®åœ¨3åˆ†é’Ÿå·¦å³ï¼Œè€Œæˆ‘æ¯å¤©ç¼–è¯‘ä¸Š20æ¬¡å°±èƒ½å·®å‡ºä¸€ä¸ªå°æ—¶ï¼Œæœ‰è¿™ä¸ªæ—¶é—´æå‰è®©æˆ‘ä¸‹ç­å¤šå¥½ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘åªè¦ä¸€ç‚¹å‡»Buildï¼Œæ•´ä¸ªæœºå™¨å°±å¼€å§‹æ»¡è´Ÿè·è¿è¡Œï¼Œé™¤äº†æ¸©åº¦é£™å‡å¤–ï¼ŒCPUä¹Ÿè¢«å æ»¡ï¼Œè¿™æ—¶å€™å¼€ä¸ªç½‘é¡µéƒ½å¡æˆäº†å¹»ç¯ç‰‡ã€‚</p>
<p>ä¸ºäº†æé«˜å·¥ä½œæ•ˆç‡ï¼Œæˆ‘å°è¯•ä¸€ç›´ç”¨å°å¼æœºå·¥ä½œï¼Œäºæ˜¯æˆ‘çš„MBPåƒç°äº†å¾ˆä¹…ï¼Œè¿™ä¹ˆä¼˜ç§€çš„ç¬”è®°æœ¬æ”¾åœ¨é‚£é‡Œåƒç°å®åœ¨æ˜¯å¿ƒç–¼ã€‚æœ€å…³é”®çš„æ˜¯ï¼Œå°å¼æœºè®©æˆ‘å®Œå…¨æ²¡æœ‰<strong>å·¥ä½œæµ</strong>çš„æ„Ÿè§‰ï¼Œå½“æˆ‘å‘¨æœ«æ— èŠæƒ³å……ç”µçš„æ—¶å€™ï¼Œæˆ‘å‘ç°æˆ‘æ‰€æœ‰æƒ³çœ‹çš„ä¸œè¥¿éƒ½åœ¨å…¬å¸ï¼Œå½“æˆ‘ä¸€ä¸ªä¸ªè½¯ä»¶æ‰“å¼€ï¼Œä¸€ä¸ªä¸ªç½‘é¡µä»å†å²è®°å½•ä¸­æ‰¾åˆ°åï¼Œæˆ‘å‘ç°æˆ‘å·²ç»æ²¡æœ‰äº†å­¦ä¹ çš„æ¬²æœ›ã€‚è¿™æ—¶å€™æˆ‘éå¸¸æƒ³å¿µç”¨ç¬”è®°æœ¬æ—¶é‚£ç§â€œåˆç›–èµ°äººâ€åï¼Œå›å®¶æ‰“å¼€ç›–å­å‘ç°æˆ‘æ‰€æœ‰çš„æ€è·¯éƒ½è¿˜åœ¨çš„æ„Ÿè§‰ã€‚</p>
<p>äºæ˜¯æˆ‘æ€¥åˆ‡çš„æ‰¾ä¸€ç§æ–¹æ³•ï¼Œè®©ç®€å•çš„ä»»åŠ¡åœ¨ç¬”è®°æœ¬ä¸Šæ¥åšï¼Œå¤æ‚çš„ä»»åŠ¡èƒ½å¤Ÿåˆ©ç”¨å°å¼æœºå®Œæˆï¼Œå¹¶ä¸”åœ¨ä½“éªŒä¸Šåšåˆ°â€œæ— å·®åˆ«â€ã€‚ç»ˆäºï¼Œæˆ‘åœ¨æµè§ˆå…¨çƒæœ€å¤§çš„åŒæ€§ç¤¾äº¤ç½‘ç«™æ—¶æƒŠå–œçš„å‘ç°äº†<a target="_blank" rel="noopener" href="https://github.com/gojuno/mainframer"><strong>mainframer</strong></a>ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å°†ç¼–è¯‘è¿™ä»¶å å†…å­˜å’ŒCPUçš„äº‹ä»æœ¬åœ°ç”µè„‘æ”¾åˆ°è¿œç¨‹ç”µè„‘ä¸Šæ¥åšã€‚</p>
<p>ç®€å•çš„è¯´ï¼Œä½ åªéœ€è¦ä¸€å°æœ¬åœ°æœºå™¨ï¼ˆLocal Machineï¼šä¾‹å¦‚æˆ‘çš„æ€§èƒ½ä¸å’‹åœ°çš„MacBookï¼‰å’Œä¸€å°è¿œç¨‹æœºå™¨ï¼ˆRemote Machineï¼šæ€§èƒ½å¼ºæ‚çš„å°å¼æœºæˆ–è€…äº‘ä¸»æœºï¼‰ï¼Œé€šè¿‡mainframerï¼Œå°±å¯ä»¥å®ç°åœ¨æœ¬åœ°æœºå™¨ä¸Šå†™ä»£ç ï¼Œåœ¨è¿œç¨‹æœºå™¨ä¸Šç¼–è¯‘ä»£ç ã€‚ä½ å¯ä»¥åœ¨ç¬”è®°æœ¬ä¸Šå†™ä»£ç ï¼Œåˆ°äº†éœ€è¦è°ƒè¯•çš„æ—¶å€™ï¼Œmainframerä¼šå¿«é€ŸåŒæ­¥ä»£ç åˆ°è¿œç¨‹æœºå™¨å¹¶è¿›è¡Œç¼–è¯‘ï¼Œå¹¶å°†ç¼–è¯‘çš„ç»“æœè¿”å›åˆ°ä½ çš„ç¬”è®°æœ¬ï¼Œè¿™ä¸€åˆ‡ä»¿ä½›éƒ½æ˜¯åœ¨ä½ çš„ç¬”è®°æœ¬ä¸Šè¿›è¡Œçš„ï¼Œä½ å¯ä»¥æ­£å¸¸çš„buildå’Œè°ƒè¯•ç¨‹åºã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥äº«å—ç¬”è®°æœ¬çš„ä¾¿æ·ï¼Œåˆèƒ½äº«å—å°å¼æœºçš„é«˜æ€§èƒ½äº†ï¼Œç¾æ»‹æ»‹ã€‚</p>
<p>ä¸‹é¢å°±æ˜¯æˆ‘é…ç½®æˆåŠŸåï¼Œå½•åˆ¶çš„åœ¨MacBookProä¸Šå†™ä»£ç ï¼Œåœ¨Linuxå‘è¡Œç‰ˆManjaroä¸Šè¿›è¡ŒBuildçš„è§†é¢‘ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av63591281/">ä¼ é€é—¨</a></p>
<p><video src="https://www.bilibili.com/ea30eaf0-ead5-4ad3-a44d-71bba3ca4dc0" controls="controls" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto;"> your browser does not support the video tag </video></p></div><a class="article-more button is-small is-size-7" href="/%E5%B7%A5%E5%85%B7/%E5%9F%BA%E4%BA%8Emainframer%E8%BF%9B%E8%A1%8C%E8%BF%9C%E7%A8%8B%E7%BC%96%E8%AF%91%EF%BC%88%E4%BB%A5android%E5%BC%80%E5%8F%91%E4%B8%BA%E4%BE%8B%EF%BC%89/#more">Read more</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-07-08T13:00:02.000Z" title="7/8/2017, 9:00:02 PM">2017-07-08</time></span><span class="level-item"><a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/">é¢è¯•</a><span>Â /Â </span><a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">æ•°æ®ç»“æ„</a></span><span class="level-item">18 minutes read (About 2684 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E9%9D%A2%E8%AF%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9B%B8%E5%85%B3/">æ•°æ®ç»“æ„ä¹‹äºŒå‰æ ‘ç›¸å…³</a></h1><div class="content"><hr>
<h4 id="äºŒå‰æ ‘çš„ç›¸å…³æœ¯è¯­"><a href="#äºŒå‰æ ‘çš„ç›¸å…³æœ¯è¯­" class="headerlink" title="äºŒå‰æ ‘çš„ç›¸å…³æœ¯è¯­:"></a>äºŒå‰æ ‘çš„ç›¸å…³æœ¯è¯­:</h4><p><strong>æ ‘çš„ç»“ç‚¹</strong>:åŒ…å«ä¸€ä¸ªæ•°æ®å…ƒç´ åŠè‹¥å¹²æŒ‡å‘å­æ ‘çš„åˆ†æ”¯ï¼›
<strong>å­©å­ç»“ç‚¹</strong>:ç»“ç‚¹çš„å­æ ‘çš„æ ¹ç§°ä¸ºè¯¥ç»“ç‚¹çš„å­©å­ï¼›
<strong>åŒäº²ç»“ç‚¹</strong>:B ç»“ç‚¹æ˜¯A ç»“ç‚¹çš„å­©å­ï¼Œåˆ™Aç»“ç‚¹æ˜¯B ç»“ç‚¹çš„åŒäº²ï¼›
<strong>å…„å¼Ÿç»“ç‚¹</strong>:åŒä¸€åŒäº²çš„å­©å­ç»“ç‚¹ï¼› å ‚å…„ç»“ç‚¹:åŒä¸€å±‚ä¸Šç»“ç‚¹ï¼›
<strong>ç¥–å…ˆç»“ç‚¹</strong>: ä»æ ¹åˆ°è¯¥ç»“ç‚¹çš„æ‰€ç»åˆ†æ”¯ä¸Šçš„æ‰€æœ‰ç»“ç‚¹å­å­™ç»“ç‚¹:ä»¥æŸç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­ä»»ä¸€ç»“ç‚¹éƒ½ç§°ä¸ºè¯¥ç»“ç‚¹çš„å­å­™
<strong>ç»“ç‚¹å±‚</strong>:æ ¹ç»“ç‚¹çš„å±‚å®šä¹‰ä¸º1ï¼›æ ¹çš„å­©å­ä¸ºç¬¬äºŒå±‚ç»“ç‚¹ï¼Œä¾æ­¤ç±»æ¨ï¼›
<strong>æ ‘çš„æ·±åº¦</strong>:æ ‘ä¸­æœ€å¤§çš„ç»“ç‚¹å±‚
<strong>ç»“ç‚¹çš„åº¦</strong>:ç»“ç‚¹å­æ ‘çš„ä¸ªæ•°
<strong>æ ‘çš„åº¦</strong>: æ ‘ä¸­æœ€å¤§çš„ç»“ç‚¹åº¦ã€‚
<strong>å¶å­ç»“ç‚¹</strong>:ä¹Ÿå«ç»ˆç«¯ç»“ç‚¹ï¼Œæ˜¯åº¦ä¸º 0 çš„ç»“ç‚¹ï¼›
<strong>åˆ†æç»“ç‚¹</strong>:åº¦ä¸ä¸º0çš„ç»“ç‚¹ï¼›
<strong>æœ‰åºæ ‘</strong>:å­æ ‘æœ‰åºçš„æ ‘ï¼Œå¦‚:å®¶æ—æ ‘ï¼›
<strong>æ— åºæ ‘</strong>:ä¸è€ƒè™‘å­æ ‘çš„é¡ºåºï¼›
<a target="_blank" rel="noopener" href="http://baike.baidu.com/item/%E4%BA%8C%E5%8F%89%E6%A0%91#2_2">å‚è€ƒ</a></p></div><a class="article-more button is-small is-size-7" href="/%E9%9D%A2%E8%AF%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9B%B8%E5%85%B3/#more">Read more</a></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="calvinche"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">calvinche</p><p class="is-size-6 is-block">Android Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Center of the universe.</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">39</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">19</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/chewenkai" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/chewenkai"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Resum" href="https://github.com/chewenkai"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">å­¦ä¹ </span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">å·¥å…·</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%A5%E5%B8%B8%E6%80%BB%E7%BB%93/"><span class="level-start"><span class="level-item">æ—¥å¸¸æ€»ç»“</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%A5%E5%B8%B8%E6%B1%87%E6%8A%A5/"><span class="level-start"><span class="level-item">æ—¥å¸¸æ±‡æŠ¥</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"><span class="level-start"><span class="level-item">æ—¥å¸¸è®°å½•</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9D%A2%E8%AF%95/"><span class="level-start"><span class="level-item">é¢è¯•</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E9%9D%A2%E8%AF%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="level-start"><span class="level-item">æ•°æ®ç»“æ„</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-03-15T11:21:28.000Z">2020-03-15</time></p><p class="title"><a href="/uncategorized/%E6%AF%8F%E6%97%A5%E5%8D%95%E8%AF%8D%E8%AE%A1%E5%88%92/">æ¯æ—¥å•è¯è®¡åˆ’</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-08-06T09:48:49.000Z">2019-08-06</time></p><p class="title"><a href="/uncategorized/git%E4%BF%9D%E5%91%BD%E5%A4%A7%E5%85%A8/">Gitä¿å‘½å¤§å…¨</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-06-10T03:29:58.000Z">2019-06-10</time></p><p class="title"><a href="/uncategorized/%E8%AE%B0%E4%B8%80%E6%AC%A1overloadaggressively%E9%80%A0%E6%88%90%E7%9A%84%E5%B4%A9%E6%BA%83/">è®°ä¸€æ¬¡overloadaggressivelyé€ æˆçš„å´©æºƒ</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-03-11T01:32:41.000Z">2019-03-11</time></p><p class="title"><a href="/uncategorized/%E5%88%9D%E8%AF%86viewpager2/">åˆè¯†ViewPager2</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-03-07T15:43:35.000Z">2019-03-07</time></p><p class="title"><a href="/uncategorized/android-studio%E7%9A%84%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%A8%A1%E7%89%88-templates-%E5%88%9B%E5%BB%BA/">Android Studioçš„ä¸‰ç§ç±»å‹çš„æ¨¡ç‰ˆ(Templates)åˆ›å»º</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">October 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">March 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/09/"><span class="level-start"><span class="level-item">September 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/08/"><span class="level-start"><span class="level-item">August 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/07/"><span class="level-start"><span class="level-item">July 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/04/"><span class="level-start"><span class="level-item">April 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/03/"><span class="level-start"><span class="level-item">March 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/01/"><span class="level-start"><span class="level-item">January 2015</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/01/"><span class="level-start"><span class="level-item">January 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/01/"><span class="level-start"><span class="level-item">January 2013</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Andoird/"><span class="tag">Andoird</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Demo/"><span class="tag">Demo</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/English/"><span class="tag">English</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MacOS/"><span class="tag">MacOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/StarDict/"><span class="tag">StarDict</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Study/"><span class="tag">Study</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VIM/"><span class="tag">VIM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VirtualBox/"><span class="tag">VirtualBox</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8A%A5%E5%91%8A/"><span class="tag">æŠ¥å‘Š</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8A%BD%E6%A0%B7%E7%9B%91%E7%9D%A3%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"><span class="tag">æŠ½æ ·ç›‘ç£ç®¡ç†ç³»ç»Ÿ</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8E%92%E5%BA%8F/"><span class="tag">æ’åº</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E5%B8%B8%E6%80%BB%E7%BB%93/"><span class="tag">æ—¥å¸¸æ€»ç»“</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"><span class="tag">æ—¥å¸¸è®°å½•</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%89%9B%E5%AE%A2/"><span class="tag">ç‰›å®¢</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">ç®—æ³•</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E8%AF%95/"><span class="tag">é¢è¯•</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Calvin" height="28"></a><p class="is-size-7"><span>&copy; 2023 calvinche</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Discuss on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus/discussions"><i class="fas fa-comments"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">Ã—</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>